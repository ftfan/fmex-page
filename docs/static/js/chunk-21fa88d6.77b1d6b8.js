(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21fa88d6"],{"4ae5":function(t,e,a){},"66ed":function(t,e,a){"use strict";var i=a("4ae5"),n=a.n(i);n.a},"7e58":function(t,e,a){},"9d01":function(t,e,a){},b73d:function(t,e,a){"use strict";a("0481"),a("4069");var i=a("5530"),n=(a("ec29"),a("9d01"),a("4de4"),a("45fc"),a("d3b7"),a("25f0"),a("c37a")),r=a("5607"),s=a("2b0e"),o=s["default"].extend({name:"rippleable",directives:{ripple:r["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),t.on=Object.assign({click:this.onChange},this.$listeners),this.$createElement("div",t)):null},onChange:function(){}}}),l=a("8547"),c=a("58df"),u=Object(c["a"])(n["a"],o,l["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data:function(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor:function(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple:function(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive:function(){var t=this,e=this.value,a=this.internalValue;return this.isMultiple?!!Array.isArray(a)&&a.some((function(a){return t.valueComparator(a,e)})):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,a):Boolean(a):this.valueComparator(a,this.trueValue)},isDirty:function(){return this.isActive},rippleState:function(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue:function(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel:function(){var t=this,e=n["a"].options.methods.genLabel.call(this);return e?(e.data.on={click:function(e){e.preventDefault(),t.onChange()}},e):e},genInput:function(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown},ref:"input"})},onBlur:function(){this.isFocused=!1},onChange:function(){var t=this;if(this.isInteractive){var e=this.value,a=this.internalValue;if(this.isMultiple){Array.isArray(a)||(a=[]);var i=a.length;a=a.filter((function(a){return!t.valueComparator(a,e)})),a.length===i&&a.push(e)}else a=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(a,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(a,e)?null:e:!a;this.validate(!0,a),this.internalValue=a,this.hasColor=a}},onFocus:function(){this.isFocused=!0},onKeydown:function(t){}}}),p=a("c3f0"),h=a("0789"),d=a("490a"),m=a("80d2");e["a"]=u.extend({name:"v-switch",directives:{Touch:p["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(i["a"])(Object(i["a"])({},n["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(i["a"])(Object(i["a"])({},this.attrs),this.attrs$)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(i["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(i["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(h["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(d["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===m["s"].left&&this.isActive||t.keyCode===m["s"].right&&!this.isActive)&&this.onChange()}}})},ec29:function(t,e,a){},fc6a8:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.report?a("div",{staticClass:"page-index"},[a("div",{staticClass:"center",staticStyle:{"padding-top":"20px"}},[a("p",[t._v("账号: "+t._s(t.report))]),t.$AppStore.localState.ApiInfo.DataKey!==t.report?a("p",[t._v("无当前账号设置权限")]):t._e()]),a("v-btn-toggle",{attrs:{color:"primary",dark:"",dense:""},model:{value:t.IsUSD,callback:function(e){t.IsUSD=e},expression:"IsUSD"}},[a("v-btn",[t._v("币本位")]),a("v-btn",[t._v("U本位")])],1),a("v-tabs",{attrs:{color:"primary",dark:""},model:{value:t.ViewMode,callback:function(e){t.ViewMode=e},expression:"ViewMode"}},[a("v-tab",[t._v("最近24小时")]),a("v-tab",[t._v("查看所有")]),a("v-tab",[t._v("自定义查看")])],1),2===t.ViewMode?[a("v-select",{attrs:{items:t.ReportsSelect,filled:"",chips:"",label:"选择查看数据",multiple:""},model:{value:t.ShowReports,callback:function(e){t.ShowReports=e},expression:"ShowReports"}}),a("v-select",{attrs:{items:t.BtcNumEnds,filled:"",chips:"",label:"资产,小数精确位数"},model:{value:t.BtcNumEnd,callback:function(e){t.BtcNumEnd=e},expression:"BtcNumEnd"}}),a("v-select",{attrs:{items:t.DataNums,filled:"",chips:"",label:"查看每日采样数据：份"},model:{value:t.DataNum,callback:function(e){t.DataNum=e},expression:"DataNum"}})]:t._e(),a("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticStyle:{top:"80px"},attrs:{color:"primary",fixed:"",top:"",right:"",small:"",fab:""}},"v-btn",n,!1),i),[a("v-icon",[t._v("mdi-view-dashboard-outline")])],1)]}}]),model:{value:t.settingDailog,callback:function(e){t.settingDailog=e},expression:"settingDailog"}},[a("v-form",{ref:"form",staticStyle:{padding:"20px","background-color":"#ffffff"},attrs:{"lazy-validation":""}},[t._l(t.params.OrderRule,(function(e,i){return a("v-list-item",{key:i,attrs:{dense:"","active-class":"text--accent-4"}},[a("v-list-item-icon",[a("v-text-field",{staticStyle:{width:"80px"},attrs:{required:"",label:"价格"+(i+1),type:"number"},model:{value:e.Price,callback:function(a){t.$set(e,"Price",t._n(a))},expression:"item.Price"}})],1),a("v-list-item-content",[a("v-text-field",{staticStyle:{width:"80px"},attrs:{required:"",label:"持仓(负为空)",type:"number"},model:{value:e.Position,callback:function(a){t.$set(e,"Position",t._n(a))},expression:"item.Position"}})],1),a("v-list-item-action",[a("v-icon",{attrs:{color:"error"},on:{click:function(e){return t.params.OrderRule.splice(i,1)}}},[t._v("mdi-close-circle")]),i<t.params.OrderRule.length-1?a("v-icon",{attrs:{color:"primary"},on:{click:function(a){return t.ChooseRule(e)}}},[t._v("mdi-vector-radius")]):t._e()],1)],1)})),a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",[a("v-icon",{attrs:{color:"primary"},on:{click:function(e){return t.params.OrderRule.push({Price:0,Position:0,Next:{Type:"L7",Position:0,Price:0}})}}},[t._v("mdi-plus-circle")])],1)],1),a("v-dialog",{model:{value:t.settingDailogSub,callback:function(e){t.settingDailogSub=e},expression:"settingDailogSub"}},[a("v-item-group",[a("v-container",[a("v-row",t._l(t.RuleTypes,(function(e){return a("v-col",{key:e,attrs:{cols:"6",md:"2"}},[a("v-card",{staticClass:"d-flex align-center",attrs:{height:"100"}},[a("div",{class:t.ActiveRule&&t.ActiveRule.Next.Type===e?"div-active":"",style:{"background-image":"url(/t-"+e+".svg)",width:"100%",height:"100%"},attrs:{type:"image/svg+xml"},on:{click:function(a){return t.RuleChoosed(e)}}})])],1)})),1)],1)],1)],1),a("v-text-field",{staticStyle:{"margin-top":"10px"},attrs:{required:"",label:"单次挂单上限(张)",type:"number",outlined:""},model:{value:t.params.MaxStepVol,callback:function(e){t.$set(t.params,"MaxStepVol",t._n(e))},expression:"params.MaxStepVol"}}),a("v-text-field",{attrs:{required:"",label:"挂单数量（单边，1~25）",type:"number",outlined:""},model:{value:t.params.OpenOrderMaxCount,callback:function(e){t.$set(t.params,"OpenOrderMaxCount",t._n(e))},expression:"params.OpenOrderMaxCount"}}),a("v-text-field",{attrs:{required:"",label:"挂单间隔(USD，0.5的倍数)",type:"number",outlined:""},model:{value:t.params.GridDiff,callback:function(e){t.$set(t.params,"GridDiff",t._n(e))},expression:"params.GridDiff"}}),a("v-text-field",{attrs:{required:"",label:"api key",type:"text",outlined:"",clearable:""},model:{value:t.params.Key,callback:function(e){t.$set(t.params,"Key",e)},expression:"params.Key"}}),a("v-text-field",{attrs:{required:"",label:"密码",type:"password",outlined:"",clearable:""},model:{value:t.params.Pwd,callback:function(e){t.$set(t.params,"Pwd",e)},expression:"params.Pwd"}}),a("v-switch",{staticClass:"ma-2",attrs:{label:"策略运行"},model:{value:t.params.Runner,callback:function(e){t.$set(t.params,"Runner",e)},expression:"params.Runner"}}),a("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:t.RunderSetting}},[a("v-icon",[t._v("mdi-refresh")]),t._v(" 预览策略视图 ")],1),a("div",{ref:"params",staticStyle:{"padding-bottom":"20px",width:"280px",height:"300px"}}),t.$AppStore.localState.ApiInfo.DataKey===t.report?a("v-btn",{staticClass:"mr-4",attrs:{color:"success"},on:{click:t.validate}},[t._v("保存")]):t._e(),t.$AppStore.localState.ApiInfo.DataKey===t.report?a("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:t.deleteIt}},[t._v("永久删除")]):t._e()],2)],1),t.loaded&&t.loadeddata&&0===t.params.Reports.length?a("v-alert",{attrs:{type:"error"}},[t._v(" 该账号，暂无报表数据 ")]):t._e(),a("div",{staticClass:"section"},[a("div",{ref:"MyAccount",staticClass:"echarts",staticStyle:{"padding-top":"10px"}}),a("div",{ref:"MyAccountReport",staticClass:"echarts",staticStyle:{"padding-top":"40px"}}),a("div",{ref:"MyAccountDetail",staticClass:"echarts",staticStyle:{"padding-top":"40px"}}),a("v-slider",{attrs:{"thumb-label":"always","thumb-size":50,min:t.detailMin,max:t.detailMax,step:.5},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.detailValue-=.5}}},[t._v(" mdi-minus ")])]},proxy:!0},{key:"append",fn:function(){return[a("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.detailValue+=.5}}},[t._v(" mdi-plus ")])]},proxy:!0}]),model:{value:t.detailValue,callback:function(e){t.detailValue=e},expression:"detailValue"}})],1)],2):a("div",{staticClass:"center"},[a("h1",{staticClass:"sitename"},[t._v("参数错误")])])},n=[],r=(a("99af"),a("4de4"),a("4160"),a("c975"),a("a15b"),a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("ac1f"),a("466d"),a("5319"),a("1276"),a("159b"),a("2909")),s=(a("96cf"),a("1da1")),o=a("d4ec"),l=a("bee2"),c=a("262e"),u=a("2caf"),p=a("9ab4"),h=a("60a3"),d=a("36c1"),m=a("313e"),f=a.n(m),v=a("a7a6"),g=a("b8f7"),b=null,y=null,x=null,S=Object(d["b"])(Date.now(),"yyyy-MM-dd"),w={},P=function(t){Object(c["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.loaded=!1,t.loadeddata=!1,t.settingDailog=!1,t.settingDailogSub=!1,t.ViewMode=1,t.modal=!1,t.DateMax=S,t.Times=[S,S],t.Dates=[S,S],t.ShowReports=[],t.BtcNumEnd=6,t.DataNum=3e3,t.BtcNumEnds=[4,5,6,7,8,9,10,11,12,13,14],t.DataNums=[500,1e3,3e3,6e3,12e3,24e3],t.OnSomeChange=Object(v["debounce"])((function(){console.log("OnSomeChange"),this.loaded&&this.loadeddata&&this.Render()}),1500),t.RuleTypes=["L7","7L","L","7","LL","77",""],t.ActiveRule=null,t.params={OrderRule:[{Price:11500,Position:1e3,Next:{Type:"L7",Position:0,Price:0}},{Price:12500,Position:0,Next:{Type:"L7",Position:0,Price:0}},{Price:13e3,Position:-100,Next:{Type:"L7",Position:0,Price:0}}],OpenOrderMaxCount:20,Runner:!1,Key:h["b"].AppStore.localState.UserKey,BasePrice:11700,BasePriceWeight:1,GridDiff:1,MaxStepVol:100,Reports:[],Time:0,Pwd:"",ReportKey:"",BakSetting:[],PricePosition:[]},t.OrderRuleModel=[],t.detailValue=0,t.detailMin=1/0,t.detailMax=0,t.SnapshotData=[],t.Runder3=Object(v["throttle"])((function(){if(x){var t=w[this.detailValue],e=function(){};if(!t)return e();var a=this.IsUSD?"UsdSum":"BtcSum",i=-1,n=t.details.filter((function(t){return t.BtcSum!==i&&(i=t[a],!0)}));if(n.length<2)return e();var r=n[0][a],s=n[n.length-1][a],o=Math.pow(10,this.BtcNumEnd),l=Math.floor((s-r)*o)/o,c=("".concat(t.price," USD 资产变更"),l/r),u="".concat(t.price," USD 用户资产变更 ").concat(l>0?"+ "+l:l," (").concat(Math.floor(1e4*c)/100,"%)");if(l>0){var p=n[n.length-1].Ts-n[0].Ts,h=Math.ceil(c),m=h/c*p,f=Object(d["b"])(n[0].Ts+m,"yyyy年MM月dd日hh点"),v=Math.floor((1+h)*r*1e4)/1e4;u+="\r\n以此预计在 ".concat(f," 资产为 ").concat(v,"（").concat(Math.floor(1e4*r)/1e4,"的").concat(h+1,"倍）")}console.log(t),x.setOption({legend:{data:["资产"]},title:{subtext:u},xAxis:{data:n.map((function(t){return Object(d["b"])(t.Ts,"hh:mm:ss\r\nMM-dd")}))},series:[{name:"资产",yAxisIndex:1,type:"line",data:n.map((function(t){return t[a]})),areaStyle:{color:"rgba(4, 100, 100, 0.3)"}}]})}}),1e3),t}return Object(l["a"])(a,[{key:"OnViewModeChange",value:function(){0===this.ViewMode?(this.ShowReports=this.ReportsSelect.slice(this.ReportsSelect.length-Math.min(this.ReportsSelect.length,2)),this.BtcNumEnd=this.BtcNumEnds[this.BtcNumEnds.length-1],this.DataNum=this.DataNums[this.DataNums.length-1]):1===this.ViewMode?(this.ShowReports=this.ReportsSelect.slice(0),this.BtcNumEnd=6,this.DataNum=this.DataNums[0]):(this.ShowReports=this.ReportsSelect.slice(this.ReportsSelect.length-Math.min(this.ReportsSelect.length,5)),this.BtcNumEnd=6,this.DataNum=3e3)}},{key:"DataFilter",value:function(t){var e=this,a=this.ShowReports.map((function(t){return t.replace(/-/g,"/")})),i=Date.now()-864e5;return t.map((function(t){var n=a.filter((function(e){return t.FileName.match(e)}))[0];if(!n)return{data:[],FileName:""};var r=Math.pow(10,e.BtcNumEnd),s=[],o=0,l=e.IsUSD?"UsdSum":"BtcSum";t.data.forEach((function(t){var a=Math.floor(t[l]*r)/r;if(a!==o&&!(0===e.ViewMode&&t.Ts<i)){o=a;var n={Ts:t.Ts,p24h:t.p24h,Price:t.Price,BtcSum:a,UsdSum:a,quantity:t.quantity};s.push(n)}}));return e.ArrayFilter(s,e.DataNum),{data:s,FileName:t.FileName}})).filter((function(t){return t.data.length}))}},{key:"ArrayFilter",value:function(t,e){var a=t.length/e;if(!(a<=1)){var i=0,n={};t.forEach((function(e,r){n[Math.floor(r*a)]=!0,n[r]&&(t[i++]=e)})),t.splice(i,t.length-i)}}},{key:"OnSettingDailogChange",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.settingDailog){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.$nextTick();case 4:return t.next=6,Object(d["e"])(1e3);case 6:this.RunderSetting();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"RunderSetting",value:function(){var t=this,e=[];this.params.OrderRule.sort((function(t,e){return t.Price-e.Price}));var a="",i=1/0,n=0;if(this.params.OrderRule.forEach((function(t,r){var s="【价格".concat(r+1,"】");if(!a){if(t.Price<=0)return a="价格不能为 0 ".concat(s);if(t.Position>i)return a="价格越大，持仓必须越小 ".concat(s);if(t.Price===n)return a="价格不能重复 ".concat(s);i=t.Position,n=t.Price,e.push(t)}})),a||(this.params.MaxStepVol<=0&&(a="下单上限错误"),this.params.OpenOrderMaxCount<=0&&(a="单边挂单数量错误"),this.params.GridDiff<.5&&(a="挂单间隔不能小于0.5"),e.length<2&&(a="价格至少设置两个")),a)return this.$AppStore.Error(a);var r=f.a.init(this.$refs.params),s=e[0].Price,o=e[e.length-1].Price-s,l=Math.ceil(o/this.params.GridDiff),c=Array(l+1).join(",").split(",").map((function(e,a){return a*t.params.GridDiff+s})),u=[],p=null;return e.forEach((function(t){if(p){var e=p;p=t;var a=e.Next;switch(a.Position=(e.Position+t.Position)/2,a.Price=(t.Price+e.Price)/2,a.Type){case"L":a.Position=a.Position- -.5*(a.Position-e.Position),a.Price=a.Price- -.5*(a.Price-t.Price);break;case"7":a.Position=a.Position- -.5*(a.Position-t.Position),a.Price=a.Price- -.5*(a.Price-e.Price);break}a.Price,a.Position,e.Price,e.Position,t.Price,t.Position;c.forEach((function(i){if(!(i<e.Price||i>t.Price)){if(i===t.Price)return u.push(t.Position);if(i===a.Price)return u.push(a.Position);if(i===e.Price)return u.push(e.Position);var n=e,r=a;i>a.Price&&(n=a,r=t);var s=(i-n.Price)/(r.Price-n.Price),o=.5+1.5*s,l=0,c=function(){return s*(n.Position-r.Position)},p=function(){return(2-1/o)/1.5*(n.Position-r.Position)},h=function(){return(1/(2.5-o)-.5)/1.5*(n.Position-r.Position)},d=a.Type.split(""),m=d[0],f=d[d.length-1];l=""===a.Type?c():i<a.Price&&"7"===m||i>a.Price&&"7"===f?h():p();var v=n.Position-l;u.push(v>0?Math.floor(v):Math.ceil(v))}}))}else p=t})),this.params.PricePosition=c.map((function(t,e){return[t,u[e]]})),r.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["仓位"]},grid:{left:"20px",right:"14px",bottom:"40px",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1}],yAxis:[{type:"value",min:"dataMin",max:"dataMax"}]}),r.setOption({xAxis:{data:c},series:[{name:"仓位",type:"bar",data:u}]}),"success"}},{key:"ChooseRule",value:function(t){this.settingDailogSub=!0,this.ActiveRule=t}},{key:"RuleChoosed",value:function(t){this.ActiveRule&&(this.ActiveRule.Next.Type=t,this.settingDailogSub=!1)}},{key:"detailValueChange",value:function(){this.Runder3()}},{key:"mounted",value:function(){this.mountedd()}},{key:"allowedDates",value:function(t){return this.params.Reports.indexOf(t)>-1}},{key:"mountedd",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.GetParams();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"Submit",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$refs.dialog.save(this.Dates),e=new Date(this.Dates[0]),a=new Date(this.Dates[1]),e.getTime()>a.getTime()&&(i=e.getTime(),e.setTime(a.getTime()),a.setTime(i)),this.Times=[Object(d["b"])(e,"yyyy-MM-dd"),Object(d["b"])(a,"yyyy-MM-dd")],h["b"].AppStore.localState.TimesCache=this.Times,this.SnapshotData=[],t.next=9,this.GetData(this.params.Reports.length-1);case 9:this.Render();case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"RenderInit",value:function(){this.SnapshotData=[],b=f.a.init(this.$refs.MyAccount),b.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["24H均价","BTC价格","账户资产","持仓"],selected:{"24H均价":!1,"BTC价格":!1,"账户资产":!0,"持仓":!1}},dataZoom:[{show:!0,start:0,end:100}],grid:{left:"20px",right:"14px",bottom:"40px",containLabel:!0},title:{text:"",subtext:"BTC价格走势 与 账户资产、持仓 走势分析",top:4},xAxis:[{type:"category",boundaryGap:!1}],yAxis:[{type:"value",position:"left",name:"BTC价格(USD)",axisLabel:{formatter:"{value}"},min:"dataMin",max:"dataMax",splitLine:{show:!1}},{type:"value",position:"right",name:"账户资产",axisLabel:{formatter:"{value}"},min:function(t){return Math.floor(1e4*t.min)/1e4},splitLine:{show:!1}},{type:"value",offset:50,position:"right",name:"持仓(张)",axisLabel:{formatter:"{value}"},splitLine:{show:!1}}]}),y=f.a.init(this.$refs.MyAccountReport),y.setOption({backgroundColor:"#404a59",tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["资产"]},grid:{left:"20px",right:"14px",bottom:"40px",containLabel:!0},title:{text:"",subtext:"资产-变更趋势",top:4},xAxis:{type:"value",name:"BTC 价格",nameGap:4,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},yAxis:{type:"value",name:"账户权益",nameLocation:"end",nameGap:4,nameTextStyle:{color:"#fff",fontSize:16},axisLine:{lineStyle:{color:"#eee"}},splitLine:{show:!1}},visualMap:[{left:"right",bottom:"5%",dimension:2,min:0,max:50,itemHeight:0,precision:.1,text:["白色表示旧数据"],textGap:30,textStyle:{color:"#fff"},inRange:{colorLightness:[1,.5],symbolSize:[2,2],colorAlpha:[.1,1],color:"#04a4cc"},outOfRange:{color:["rgba(255,255,255,.2)"]},controller:{inRange:{color:["#04a4cc"]},outOfRange:{color:["#04a4cc"]}}}]}),x=f.a.init(this.$refs.MyAccountDetail),x.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["资产变更-详情"]},grid:{left:"20px",right:"14px",bottom:"40px",top:"80px",containLabel:!0},title:{text:"",subtext:"",top:4},xAxis:[{type:"category",boundaryGap:!1,scale:!0,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{type:"value",position:"left",name:"价格: USD",axisLabel:{formatter:"{value}"},min:"dataMin",splitLine:{show:!1}},{type:"value",position:"right",name:"账户权益",axisLabel:{formatter:"{value}"},min:function(t){return Math.floor(1e4*t.min)/1e4},splitLine:{show:!1}}]})}},{key:"Render",value:function(){var t=this;if(b&&y&&x){var e={name:"资产(BTC)",type:"line",color:"rgba(4, 100, 100, 0.4)",areaStyle:{color:"rgba(4, 100, 100, 0.3)"},key:"BtcSum",y:1},a={name:"资产(USD)",type:"line",color:"rgba(4, 100, 100, 0.4)",areaStyle:{color:"rgba(4, 100, 100, 0.3)"},key:"UsdSum",y:1};console.log("IsUSD",this.IsUSD);var i=[this.IsUSD?a:e,{name:"24H均价",type:"line",color:"#666666",key:"p24h",y:0},{name:"BTC价格",type:"line",color:"rgba(4, 164, 204, 1)",key:"Price",y:0},{name:"持仓",type:"line",color:"rgba(255, 0, 150, 0.5)",areaStyle:{color:"rgba(255, 0, 150, 0.2)"},key:"quantity",y:2}],n={};i.forEach((function(t){n[t.name]={yAxisIndex:t.y,name:t.name,type:t.type,data:[],color:t.color,areaStyle:t.areaStyle}}));var s=[];w={};var o=[],l=[],c=this.DataFilter(this.SnapshotData);c.forEach((function(t){t.data.forEach((function(t){l.push(t),i.forEach((function(e){var a=t[e.key];n[e.name].data.push(a)})),s.push(Object(d["b"])(t.Ts,"hh:mm:ss\r\nMM-dd"))}))}));var u=this.IsUSD?"UsdSum":"BtcSum";this.SnapshotData.forEach((function(e){e.data.forEach((function(e){var a=w[e.Price];if(!a)return w[e.Price]={low:e[u],high:e[u],open:e[u],close:e[u],price:e.Price,details:[e]},void o.push(w[e.Price]);a.low=Math.min(a.low,e[u]),a.high=Math.max(a.high,e[u]),a.close=e[u],a.details.push(e),t.detailMax=Math.max(t.detailMax,e.Price),t.detailMin=Math.min(t.detailMin,e.Price)}))}));var p=0;o.forEach((function(t){var e=t.close,a=t.low,i=t.high,n=o[p++];n.low=a,n.high=i,n.close=e})),o.splice(p,o.length-p),o.sort((function(t,e){return t.price-e.price})),b.setOption({xAxis:{data:s},series:Object(r["a"])(i.map((function(t){return n[t.name]})))});l.sort((function(t,e){return t.Price-e.Price}));var h={opacity:.8,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0, 0, 0, 0.5)"},m=l.map((function(t){return t.Price})),f=l.map((function(t){return t[u]})),v=l.map((function(t){return t.Ts}));y.setOption({xAxis:{min:Math.min.apply(Math,Object(r["a"])(m)),max:Math.max.apply(Math,Object(r["a"])(m))},yAxis:{min:Math.floor(1e4*Math.min.apply(Math,Object(r["a"])(f)))/1e4,max:Math.ceil(1e4*Math.max.apply(Math,Object(r["a"])(f)))/1e4},visualMap:[{dimension:2,min:Math.min.apply(Math,Object(r["a"])(v)),max:Math.max.apply(Math,Object(r["a"])(v))}],series:[{name:"",type:"scatter",itemStyle:h,data:l.map((function(t){return[t.Price,t[u],t.Ts]}))}]});var g=c[c.length-1];if(g&&g.data.length){var S=g.data[g.data.length-1].Price;console.log(S),this.detailValue=S}}}},{key:"GetData",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,i,n,r,s,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=o.length>1&&void 0!==o[1]?o[1]:1,!(a>5)){t.next=3;break}return t.abrupt("return");case 3:if(i=this.params.Reports[e],i){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,this.$AnalysisStore.GetData("https://fmex-database.oss-cn-qingdao.aliyuncs.com"+i);case 8:if(n=t.sent,n){t.next=11;break}return t.abrupt("return",this.GetData(e,++a));case 11:if(this.SnapshotData.unshift({FileName:i,data:n}),r=--e,s=this.params.Reports[r],!s){t.next=16;break}return t.abrupt("return",this.GetData(r));case 16:return this.Render(),this.loadeddata=!0,t.abrupt("return",!0);case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"GetParams",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$AnalysisStore.GetJson("https://fmex-database.oss-cn-qingdao.aliyuncs.com/runner/report/".concat(this.report,"/config"),!0);case 2:if(e=t.sent,e){t.next=5;break}return t.abrupt("return",this.$AppStore.Error("配置文件加载失败，请刷新重试"));case 5:if(Object.assign(this.params,e),this.loaded=!0,this.params.Key=this.$AppStore.localState.UserKey,0!==this.params.Reports.length){t.next=10;break}return t.abrupt("return");case 10:0===this.ShowReports.length&&(this.ShowReports=this.ReportsSelect.slice(this.ReportsSelect.length-Math.min(this.ReportsSelect.length,5))),this.GetData(this.params.Reports.length-1),this.RenderInit();case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"validate",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.RunderSetting(),"success"===e){t.next=3;break}return t.abrupt("return");case 3:return this.params.ReportKey=this.report,this.$AppStore.localState.UserKey=this.params.Key,t.next=7,g["a"].post("/grid/set-params",this.params).then((function(t){return t.data}));case 7:if(a=t.sent,console.log(a),this.settingDailog=!1,!a.Error()){t.next=12;break}return t.abrupt("return",this.$AppStore.Error(a.Msg));case 12:this.$AppStore.Error("保存成功");case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"deleteIt",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=confirm("永久删除后，无法找回数据，是否删除？"),e){t.next=3;break}return t.abrupt("return");case 3:return this.params.ReportKey=this.report,t.next=6,g["a"].post("/grid/del-params",this.params).then((function(t){return t.data}));case 6:if(a=t.sent,console.log(a),this.settingDailog=!1,!a.Error()){t.next=11;break}return t.abrupt("return",this.$AppStore.Error(a.Msg));case 11:this.$AppStore.localState.UserKey="",this.$AppStore.localState.ApiInfo.DataKey="",this.$AppStore.Error("删除成功");case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"IsUSD",get:function(){return this.$AppStore.localState.IsUsdBenWei[this.report]||0},set:function(t){this.$set(this.$AppStore.localState.IsUsdBenWei,this.report,t)}},{key:"BuildTime",get:function(){var t="__Build_Time__"===window.__Build_Time?Date.now():parseInt(window.__Build_Time,10);return Object(d["b"])(t,"yyyy-MM-dd hh:mm")}},{key:"ReportsSelect",get:function(){return this.params.Reports.map((function(t){return t.replace(/(.*?)\/(\d\d\d\d)\/(\d\d)\/(\d\d)\.json/,(function(t,e,a,i,n){return"".concat(a,"-").concat(i,"-").concat(n)}))}))}},{key:"report",get:function(){var t=this.$route.query.DataKey;return t||"e6e53eb75ebbe4eae637898fee27dacc"}}]),a}(h["b"]);Object(p["a"])([Object(h["c"])("ViewMode",{immediate:!0})],P.prototype,"OnViewModeChange",null),Object(p["a"])([Object(h["c"])("BtcNumEnd"),Object(h["c"])("IsUSD"),Object(h["c"])("DataNum"),Object(h["c"])("ShowReports",{deep:!0})],P.prototype,"OnSomeChange",void 0),Object(p["a"])([Object(h["c"])("settingDailog")],P.prototype,"OnSettingDailogChange",null),Object(p["a"])([Object(h["c"])("detailValue")],P.prototype,"detailValueChange",null),P=Object(p["a"])([Object(h["a"])({components:{}})],P);var k=P,D=k,M=(a("66ed"),a("2877")),R=a("6544"),O=a.n(R),C=a("0798"),A=a("8336"),V=a("5530"),j=(a("7e58"),a("3860")),_=a("a9ad"),B=a("58df"),T=Object(B["a"])(j["a"],_["a"]).extend({name:"v-btn-toggle",props:{backgroundColor:String,borderless:Boolean,dense:Boolean,group:Boolean,rounded:Boolean,shaped:Boolean,tile:Boolean},computed:{classes:function(){return Object(V["a"])(Object(V["a"])({},j["a"].options.computed.classes.call(this)),{},{"v-btn-toggle":!0,"v-btn-toggle--borderless":this.borderless,"v-btn-toggle--dense":this.dense,"v-btn-toggle--group":this.group,"v-btn-toggle--rounded":this.rounded,"v-btn-toggle--shaped":this.shaped,"v-btn-toggle--tile":this.tile},this.themeClasses)}},methods:{genData:function(){var t=this.setTextColor(this.color,Object(V["a"])({},j["a"].options.methods.genData.call(this)));return this.group?t:this.setBackgroundColor(this.backgroundColor,t)}}}),$=a("b0af"),E=a("62ad"),L=a("a523"),N=a("169a"),I=a("4bd4"),U=a("132d"),G=a("604c"),K=a("da13"),F=a("1800"),q=a("5d23"),z=a("34c3"),H=a("0fd9"),J=a("b974"),W=a("ba0d"),Z=a("b73d"),X=a("71a3"),Y=a("fe57"),Q=a("8654"),tt=Object(M["a"])(D,i,n,!1,null,"7fc74431",null);e["default"]=tt.exports;O()(tt,{VAlert:C["a"],VBtn:A["a"],VBtnToggle:T,VCard:$["a"],VCol:E["a"],VContainer:L["a"],VDialog:N["a"],VForm:I["a"],VIcon:U["a"],VItemGroup:G["b"],VListItem:K["a"],VListItemAction:F["a"],VListItemContent:q["a"],VListItemIcon:z["a"],VRow:H["a"],VSelect:J["a"],VSlider:W["a"],VSwitch:Z["a"],VTab:X["a"],VTabs:Y["a"],VTextField:Q["a"]})}}]);
//# sourceMappingURL=chunk-21fa88d6.77b1d6b8.js.map