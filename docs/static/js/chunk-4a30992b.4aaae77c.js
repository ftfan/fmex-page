(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a30992b"],{"0bc8":function(t,e,i){},"88bc":function(t,e,i){"use strict";var a=i("0bc8"),r=i.n(a);r.a},"9d01":function(t,e,i){},b73d:function(t,e,i){"use strict";i("0481"),i("4069");var a=i("5530"),r=(i("ec29"),i("9d01"),i("4de4"),i("45fc"),i("d3b7"),i("25f0"),i("c37a")),n=i("5607"),s=i("2b0e"),o=s["default"].extend({name:"rippleable",directives:{ripple:n["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),t.on=Object.assign({click:this.onChange},this.$listeners),this.$createElement("div",t)):null},onChange:function(){}}}),c=i("8547"),l=i("58df"),u=Object(l["a"])(r["a"],o,c["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data:function(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor:function(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple:function(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive:function(){var t=this,e=this.value,i=this.internalValue;return this.isMultiple?!!Array.isArray(i)&&i.some((function(i){return t.valueComparator(i,e)})):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,i):Boolean(i):this.valueComparator(i,this.trueValue)},isDirty:function(){return this.isActive},rippleState:function(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue:function(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel:function(){var t=this,e=r["a"].options.methods.genLabel.call(this);return e?(e.data.on={click:function(e){e.preventDefault(),t.onChange()}},e):e},genInput:function(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown},ref:"input"})},onBlur:function(){this.isFocused=!1},onChange:function(){var t=this;if(this.isInteractive){var e=this.value,i=this.internalValue;if(this.isMultiple){Array.isArray(i)||(i=[]);var a=i.length;i=i.filter((function(i){return!t.valueComparator(i,e)})),i.length===a&&i.push(e)}else i=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(i,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(i,e)?null:e:!i;this.validate(!0,i),this.internalValue=i,this.hasColor=i}},onFocus:function(){this.isFocused=!0},onKeydown:function(t){}}}),p=i("c3f0"),h=i("0789"),d=i("490a"),m=i("80d2");e["a"]=u.extend({name:"v-switch",directives:{Touch:p["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(a["a"])(Object(a["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(a["a"])(Object(a["a"])({},this.attrs),this.attrs$)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(a["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(a["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(h["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(d["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===m["s"].left&&this.isActive||t.keyCode===m["s"].right&&!this.isActive)&&this.onChange()}}})},ec29:function(t,e,i){},fc6a8:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.report?i("div",{staticClass:"page-index"},[i("div",{staticClass:"center",staticStyle:{"padding-top":"20px"}},[i("p",[t._v("账号: "+t._s(t.report))]),t.$AppStore.localState.ApiInfo.DataKey!==t.report?i("p",[t._v("无当前账号设置权限")]):t._e()]),i("v-tabs",{attrs:{color:"primary",dark:""},model:{value:t.ViewMode,callback:function(e){t.ViewMode=e},expression:"ViewMode"}},[i("v-tab",[t._v("最近24小时")]),i("v-tab",[t._v("查看所有")]),i("v-tab",[t._v("自定义查看")])],1),2===t.ViewMode?[i("v-select",{attrs:{items:t.ReportsSelect,filled:"",chips:"",label:"选择查看数据",multiple:""},model:{value:t.ShowReports,callback:function(e){t.ShowReports=e},expression:"ShowReports"}}),i("v-select",{attrs:{items:t.BtcNumEnds,filled:"",chips:"",label:"资产(BTC)小数精确位数"},model:{value:t.BtcNumEnd,callback:function(e){t.BtcNumEnd=e},expression:"BtcNumEnd"}}),i("v-select",{attrs:{items:t.DataNums,filled:"",chips:"",label:"查看每日采样数据：份"},model:{value:t.DataNum,callback:function(e){t.DataNum=e},expression:"DataNum"}})]:t._e(),i("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,r=e.attrs;return[i("v-btn",t._g(t._b({staticStyle:{top:"80px"},attrs:{color:"primary",fixed:"",top:"",right:"",small:"",fab:""}},"v-btn",r,!1),a),[i("v-icon",[t._v("mdi-view-dashboard-outline")])],1)]}}]),model:{value:t.settingDailog,callback:function(e){t.settingDailog=e},expression:"settingDailog"}},[i("v-form",{ref:"form",staticStyle:{padding:"20px","background-color":"#ffffff"},attrs:{"lazy-validation":""}},[t._l(t.params.OrderRule,(function(e,a){return i("v-list-item",{key:a,attrs:{dense:"","active-class":"text--accent-4"}},[i("v-list-item-icon",[i("v-text-field",{staticStyle:{width:"80px"},attrs:{required:"",label:"价格"+(a+1),type:"number"},model:{value:e.Price,callback:function(i){t.$set(e,"Price",t._n(i))},expression:"item.Price"}})],1),i("v-list-item-content",[i("v-text-field",{staticStyle:{width:"80px"},attrs:{required:"",label:"持仓(负为空)",type:"number"},model:{value:e.Position,callback:function(i){t.$set(e,"Position",t._n(i))},expression:"item.Position"}})],1),i("v-list-item-action",[i("v-icon",{attrs:{color:"error"},on:{click:function(e){return t.params.OrderRule.splice(a,1)}}},[t._v("mdi-close-circle")]),a<t.params.OrderRule.length-1?i("v-icon",{attrs:{color:"primary"},on:{click:function(i){return t.ChooseRule(e)}}},[t._v("mdi-vector-radius")]):t._e()],1)],1)})),i("v-list-item",{attrs:{dense:""}},[i("v-list-item-content",[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){return t.params.OrderRule.push({Price:0,Position:0,Next:{Type:"L7",Position:0,Price:0}})}}},[t._v("mdi-plus-circle")])],1)],1),i("v-dialog",{model:{value:t.settingDailogSub,callback:function(e){t.settingDailogSub=e},expression:"settingDailogSub"}},[i("v-item-group",[i("v-container",[i("v-row",t._l(t.RuleTypes,(function(e){return i("v-col",{key:e,attrs:{cols:"6",md:"2"}},[i("v-card",{staticClass:"d-flex align-center",attrs:{height:"100"}},[i("div",{class:t.ActiveRule&&t.ActiveRule.Next.Type===e?"div-active":"",style:{"background-image":"url(/t-"+e+".svg)",width:"100%",height:"100%"},attrs:{type:"image/svg+xml"},on:{click:function(i){return t.RuleChoosed(e)}}})])],1)})),1)],1)],1)],1),i("v-text-field",{staticStyle:{"margin-top":"10px"},attrs:{required:"",label:"单次挂单上限(张)",type:"number",outlined:""},model:{value:t.params.MaxStepVol,callback:function(e){t.$set(t.params,"MaxStepVol",t._n(e))},expression:"params.MaxStepVol"}}),i("v-text-field",{attrs:{required:"",label:"挂单数量（单边，1~25）",type:"number",outlined:""},model:{value:t.params.OpenOrderMaxCount,callback:function(e){t.$set(t.params,"OpenOrderMaxCount",t._n(e))},expression:"params.OpenOrderMaxCount"}}),i("v-text-field",{attrs:{required:"",label:"挂单间隔(USD，0.5的倍数)",type:"number",outlined:""},model:{value:t.params.GridDiff,callback:function(e){t.$set(t.params,"GridDiff",t._n(e))},expression:"params.GridDiff"}}),i("v-text-field",{attrs:{required:"",label:"api key",type:"text",outlined:"",clearable:""},model:{value:t.params.Key,callback:function(e){t.$set(t.params,"Key",e)},expression:"params.Key"}}),i("v-text-field",{attrs:{required:"",label:"密码",type:"password",outlined:"",clearable:""},model:{value:t.params.Pwd,callback:function(e){t.$set(t.params,"Pwd",e)},expression:"params.Pwd"}}),i("v-switch",{staticClass:"ma-2",attrs:{label:"策略运行"},model:{value:t.params.Runner,callback:function(e){t.$set(t.params,"Runner",e)},expression:"params.Runner"}}),i("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:t.RunderSetting}},[i("v-icon",[t._v("mdi-refresh")]),t._v(" 预览策略视图 ")],1),i("div",{ref:"params",staticStyle:{"padding-bottom":"20px",width:"280px",height:"300px"}}),t.$AppStore.localState.ApiInfo.DataKey===t.report?i("v-btn",{staticClass:"mr-4",attrs:{color:"success"},on:{click:t.validate}},[t._v("保存")]):t._e(),t.$AppStore.localState.ApiInfo.DataKey===t.report?i("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:t.deleteIt}},[t._v("永久删除")]):t._e()],2)],1),t.loaded&&t.loadeddata&&0===t.params.Reports.length?i("v-alert",{attrs:{type:"error"}},[t._v(" 该账号，暂无报表数据 ")]):t._e(),i("div",{staticClass:"section"},[i("div",{ref:"MyAccount",staticClass:"echarts",staticStyle:{"padding-top":"10px"}}),i("div",{ref:"MyAccountDetail",staticClass:"echarts",staticStyle:{"padding-top":"40px"}}),i("v-slider",{attrs:{"thumb-label":"always","thumb-size":60,min:t.detailMin,max:t.detailMax,step:.5},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.detailValue-=.5}}},[t._v(" mdi-minus ")])]},proxy:!0},{key:"append",fn:function(){return[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.detailValue+=.5}}},[t._v(" mdi-plus ")])]},proxy:!0}]),model:{value:t.detailValue,callback:function(e){t.detailValue=e},expression:"detailValue"}}),i("div",{ref:"MyAccountReport",staticClass:"echarts",staticStyle:{"padding-top":"40px"}})],1)],2):i("div",{staticClass:"center"},[i("h1",{staticClass:"sitename"},[t._v("参数错误")])])},r=[],n=(i("99af"),i("4de4"),i("4160"),i("c975"),i("a15b"),i("d81d"),i("fb6a"),i("a434"),i("b0c0"),i("ac1f"),i("466d"),i("5319"),i("1276"),i("159b"),i("2909")),s=(i("96cf"),i("1da1")),o=i("d4ec"),c=i("bee2"),l=i("262e"),u=i("2caf"),p=i("9ab4"),h=i("60a3"),d=i("36c1"),m=i("313e"),f=i.n(m),v=i("a7a6"),g=i("b8f7"),b=null,y=null,x=null,S=Object(d["b"])(Date.now(),"yyyy-MM-dd"),w={},P=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.loaded=!1,t.loadeddata=!1,t.settingDailog=!1,t.settingDailogSub=!1,t.ViewMode=0,t.modal=!1,t.DateMax=S,t.Times=[S,S],t.Dates=[S,S],t.ShowReports=[],t.BtcNumEnd=6,t.DataNum=3e3,t.BtcNumEnds=[4,5,6,7,8,9,10,11,12,13,14],t.DataNums=[500,1e3,3e3,6e3,12e3,24e3],t.OnSomeChange=Object(v["debounce"])((function(){this.loaded&&this.loadeddata&&this.Render()}),1500),t.RuleTypes=["L7","7L","L","7","LL","77",""],t.ActiveRule=null,t.params={OrderRule:[{Price:11500,Position:1e3,Next:{Type:"L7",Position:0,Price:0}},{Price:12500,Position:0,Next:{Type:"L7",Position:0,Price:0}},{Price:13e3,Position:-100,Next:{Type:"L7",Position:0,Price:0}}],OpenOrderMaxCount:20,Runner:!1,Key:h["b"].AppStore.localState.UserKey,BasePrice:11700,BasePriceWeight:1,GridDiff:1,MaxStepVol:100,Reports:[],Time:0,Pwd:"",ReportKey:"",BakSetting:[],PricePosition:[]},t.OrderRuleModel=[],t.detailValue=0,t.detailMin=1/0,t.detailMax=0,t.SnapshotData=[],t.Runder3=Object(v["throttle"])((function(){if(x){var t=w[this.detailValue],e=function(){};if(!t)return e();var i=-1,a=t.details.filter((function(t){return t.BtcSum!==i&&(i=t.BtcSum,!0)}));if(a.length<2)return e();var r=a[0].BtcSum,n=a[a.length-1].BtcSum,s=Math.pow(10,this.BtcNumEnd),o=Math.floor((n-r)*s)/s,c=("".concat(t.price," USD 资产变更"),"".concat(t.price," USD 资产变更: ").concat(o," (").concat(Math.floor(o/r*1e4)/100,"%)"));console.log(t),x.setOption({legend:{data:["资产"]},title:{subtext:c},xAxis:{data:a.map((function(t){return Object(d["b"])(t.Ts,"hh:mm:ss\r\nMM-dd")}))},series:[{name:"资产",yAxisIndex:1,type:"line",data:a.map((function(t){return t.BtcSum})),areaStyle:{color:"rgba(4, 100, 100, 0.3)"}}]})}}),1e3),t}return Object(c["a"])(i,[{key:"OnViewModeChange",value:function(){0===this.ViewMode?(this.ShowReports=this.ReportsSelect.slice(this.ReportsSelect.length-Math.min(this.ReportsSelect.length,2)),this.BtcNumEnd=this.BtcNumEnds[this.BtcNumEnds.length-1],this.DataNum=this.DataNums[this.DataNums.length-1]):1===this.ViewMode?(this.ShowReports=this.ReportsSelect.slice(0),this.BtcNumEnd=6,this.DataNum=this.DataNums[0]):(this.ShowReports=this.ReportsSelect.slice(this.ReportsSelect.length-Math.min(this.ReportsSelect.length,5)),this.BtcNumEnd=6,this.DataNum=3e3)}},{key:"DataFilter",value:function(t){var e=this,i=this.ShowReports.map((function(t){return t.replace(/-/g,"/")})),a=Date.now()-864e5;return t.map((function(t){var r=i.filter((function(e){return t.FileName.match(e)}))[0];if(!r)return{data:[],FileName:""};var n=Math.pow(10,e.BtcNumEnd),s=[],o=0;t.data.forEach((function(t){var i=Math.floor(t.BtcSum*n)/n;if(i!==o&&!(0===e.ViewMode&&t.Ts<a)){o=i;var r={Ts:t.Ts,p24h:t.p24h,Price:t.Price,BtcSum:i,UsdSum:t.UsdSum,quantity:t.quantity};s.push(r)}}));return e.ArrayFilter(s,e.DataNum),{data:s,FileName:t.FileName}})).filter((function(t){return t.data.length}))}},{key:"ArrayFilter",value:function(t,e){var i=t.length/e;if(!(i<=1)){var a=0,r={};t.forEach((function(e,n){r[Math.floor(n*i)]=!0,r[n]&&(t[a++]=e)})),t.splice(a,t.length-a)}}},{key:"OnSettingDailogChange",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.settingDailog){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.$nextTick();case 4:return t.next=6,Object(d["e"])(1e3);case 6:this.RunderSetting();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"RunderSetting",value:function(){var t=this,e=[];this.params.OrderRule.sort((function(t,e){return t.Price-e.Price}));var i="",a=1/0,r=0;if(this.params.OrderRule.forEach((function(t,n){var s="【价格".concat(n+1,"】");if(!i){if(t.Price<=0)return i="价格不能为 0 ".concat(s);if(t.Position>a)return i="价格越大，持仓必须越小 ".concat(s);if(t.Price===r)return i="价格不能重复 ".concat(s);a=t.Position,r=t.Price,e.push(t)}})),i||(this.params.MaxStepVol<=0&&(i="下单上限错误"),this.params.OpenOrderMaxCount<=0&&(i="单边挂单数量错误"),this.params.GridDiff<.5&&(i="挂单间隔不能小于0.5"),e.length<2&&(i="价格至少设置两个")),i)return this.$AppStore.Error(i);var n=f.a.init(this.$refs.params),s=e[0].Price,o=e[e.length-1].Price-s,c=Math.ceil(o/this.params.GridDiff),l=Array(c+1).join(",").split(",").map((function(e,i){return i*t.params.GridDiff+s})),u=[],p=null;return e.forEach((function(t){if(p){var e=p;p=t;var i=e.Next;switch(i.Position=(e.Position+t.Position)/2,i.Price=(t.Price+e.Price)/2,i.Type){case"L":i.Position=i.Position- -.5*(i.Position-e.Position),i.Price=i.Price- -.5*(i.Price-t.Price);break;case"7":i.Position=i.Position- -.5*(i.Position-t.Position),i.Price=i.Price- -.5*(i.Price-e.Price);break}i.Price,i.Position,e.Price,e.Position,t.Price,t.Position;l.forEach((function(a){if(!(a<e.Price||a>t.Price)){if(a===t.Price)return u.push(t.Position);if(a===i.Price)return u.push(i.Position);if(a===e.Price)return u.push(e.Position);var r=e,n=i;a>i.Price&&(r=i,n=t);var s=(a-r.Price)/(n.Price-r.Price),o=.5+1.5*s,c=0,l=function(){return s*(r.Position-n.Position)},p=function(){return(2-1/o)/1.5*(r.Position-n.Position)},h=function(){return(1/(2.5-o)-.5)/1.5*(r.Position-n.Position)},d=i.Type.split(""),m=d[0],f=d[d.length-1];c=""===i.Type?l():a<i.Price&&"7"===m||a>i.Price&&"7"===f?h():p();var v=r.Position-c;u.push(v>0?Math.floor(v):Math.ceil(v))}}))}else p=t})),this.params.PricePosition=l.map((function(t,e){return[t,u[e]]})),n.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["仓位"]},grid:{left:"20px",right:"14px",bottom:"40px",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1}],yAxis:[{type:"value",min:"dataMin",max:"dataMax"}]}),n.setOption({xAxis:{data:l},series:[{name:"仓位",type:"bar",data:u}]}),"success"}},{key:"ChooseRule",value:function(t){this.settingDailogSub=!0,this.ActiveRule=t}},{key:"RuleChoosed",value:function(t){this.ActiveRule&&(this.ActiveRule.Next.Type=t,this.settingDailogSub=!1)}},{key:"detailValueChange",value:function(){this.Runder3()}},{key:"mounted",value:function(){this.mountedd()}},{key:"allowedDates",value:function(t){return this.params.Reports.indexOf(t)>-1}},{key:"mountedd",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.GetParams();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"Submit",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$refs.dialog.save(this.Dates),e=new Date(this.Dates[0]),i=new Date(this.Dates[1]),e.getTime()>i.getTime()&&(a=e.getTime(),e.setTime(i.getTime()),i.setTime(a)),this.Times=[Object(d["b"])(e,"yyyy-MM-dd"),Object(d["b"])(i,"yyyy-MM-dd")],h["b"].AppStore.localState.TimesCache=this.Times,this.SnapshotData=[],t.next=9,this.GetData(this.params.Reports.length-1);case 9:this.Render();case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"RenderInit",value:function(){this.SnapshotData=[],b=f.a.init(this.$refs.MyAccount),b.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["24H均价","现价","账户资产(BTC)","持仓"],selected:{"24H均价":!0,"现价":!0,"账户资产(BTC)":!0,"持仓":!0}},dataZoom:[{show:!0,start:0,end:100}],grid:{left:"20px",right:"14px",bottom:"40px",containLabel:!0},title:{text:"",subtext:"BTC价格走势 与 账户资产、持仓 走势分析",top:4},xAxis:[{type:"category",boundaryGap:!1}],yAxis:[{type:"value",position:"left",name:"BTC价格(USD)",axisLabel:{formatter:"{value}"},min:"dataMin",max:"dataMax",splitLine:{show:!1}},{type:"value",position:"right",name:"资产(BTC)",axisLabel:{formatter:"{value}"},min:function(t){return Math.floor(1e4*t.min)/1e4},splitLine:{show:!1}},{type:"value",offset:50,position:"right",name:"持仓(张)",axisLabel:{formatter:"{value}"},splitLine:{show:!1}}]}),y=f.a.init(this.$refs.MyAccountReport),y.setOption({backgroundColor:"#404a59",tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["资产"]},grid:{left:"20px",right:"14px",bottom:"40px",containLabel:!0},title:{text:"",subtext:"资产-变更趋势",top:4},xAxis:{type:"value",name:"BTC 价格",nameGap:4,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},yAxis:{type:"value",name:"账户权益 BTC",nameLocation:"end",nameGap:4,nameTextStyle:{color:"#fff",fontSize:16},axisLine:{lineStyle:{color:"#eee"}},splitLine:{show:!1}},visualMap:[{left:"right",bottom:"5%",dimension:2,min:0,max:50,itemHeight:0,precision:.1,text:["白色表示旧数据"],textGap:30,textStyle:{color:"#fff"},inRange:{colorLightness:[1,.5],symbolSize:[2,2],colorAlpha:[.1,1],color:"#04a4cc"},outOfRange:{color:["rgba(255,255,255,.2)"]},controller:{inRange:{color:["#04a4cc"]},outOfRange:{color:["#04a4cc"]}}}]}),x=f.a.init(this.$refs.MyAccountDetail),x.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["资产变更-详情"]},grid:{left:"20px",right:"14px",bottom:"40px",containLabel:!0},title:{text:"",subtext:"资产-变更记录",top:4},xAxis:[{type:"category",boundaryGap:!1,scale:!0,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{type:"value",position:"left",name:"价格: USD",axisLabel:{formatter:"{value}"},min:"dataMin",splitLine:{show:!1}},{type:"value",position:"right",name:"账户权益: BTC",axisLabel:{formatter:"{value}"},min:function(t){return Math.floor(1e4*t.min)/1e4},splitLine:{show:!1}}]})}},{key:"Render",value:function(){var t=this;if(b&&y&&x){var e=[{name:"资产BTC",type:"line",color:"rgba(4, 100, 100, 0.3)",areaStyle:{color:"rgba(4, 100, 100, 0.3)"},key:"BtcSum",y:1},{name:"24H均价",type:"line",color:"#666666",key:"p24h",y:0},{name:"现价",type:"line",color:"rgba(4, 164, 204, 1)",key:"Price",y:0},{name:"持仓",type:"line",color:"rgba(255, 0, 150, 0.5)",areaStyle:{color:"rgba(255, 0, 150, 0.5)"},key:"quantity",y:2}],i={};e.forEach((function(t){i[t.name]={yAxisIndex:t.y,name:t.name,type:t.type,data:[],color:t.color,areaStyle:t.areaStyle}}));var a=[];w={};var r=[],s=[],o=this.DataFilter(this.SnapshotData);o.forEach((function(n){n.data.forEach((function(n){s.push(n),e.forEach((function(t){var e=n[t.key];i[t.name].data.push(e)})),a.push(Object(d["b"])(n.Ts,"hh:mm:ss\r\nMM-dd"));var o=w[n.Price];if(!o)return w[n.Price]={low:n.BtcSum,high:n.BtcSum,open:n.BtcSum,close:n.BtcSum,price:n.Price,details:[n]},void r.push(w[n.Price]);o.low=Math.min(o.low,n.BtcSum),o.high=Math.max(o.high,n.BtcSum),o.close=n.BtcSum,o.details.push(n),t.detailMax=Math.max(t.detailMax,n.Price),t.detailMin=Math.min(t.detailMin,n.Price)}))}));var c=0;r.forEach((function(t){var e=t.close,i=t.low,a=t.high,n=r[c++];n.low=i,n.high=a,n.close=e})),r.splice(c,r.length-c),r.sort((function(t,e){return t.price-e.price})),b.setOption({xAxis:{data:a},series:Object(n["a"])(e.map((function(t){return i[t.name]})))});s.sort((function(t,e){return t.Price-e.Price}));var l={opacity:.8,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0, 0, 0, 0.5)"},u=s.map((function(t){return t.Price})),p=s.map((function(t){return t.BtcSum})),h=s.map((function(t){return t.Ts}));y.setOption({xAxis:{min:Math.min.apply(Math,Object(n["a"])(u)),max:Math.max.apply(Math,Object(n["a"])(u))},yAxis:{min:Math.floor(1e4*Math.min.apply(Math,Object(n["a"])(p)))/1e4,max:Math.ceil(1e4*Math.max.apply(Math,Object(n["a"])(p)))/1e4},visualMap:[{dimension:2,min:Math.min.apply(Math,Object(n["a"])(h)),max:Math.max.apply(Math,Object(n["a"])(h))}],series:[{name:"",type:"scatter",itemStyle:l,data:s.map((function(t){return[t.Price,t.BtcSum,t.Ts]}))}]});var m=o[o.length-1];if(m&&m.data.length){var f=m.data[m.data.length-1].Price;console.log(f),this.detailValue=f}}}},{key:"GetData",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var i,a,r,n,s,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=o.length>1&&void 0!==o[1]?o[1]:1,!(i>5)){t.next=3;break}return t.abrupt("return");case 3:if(a=this.params.Reports[e],a){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,this.$AnalysisStore.GetData("https://fmex-database.oss-cn-qingdao.aliyuncs.com"+a);case 8:if(r=t.sent,r){t.next=11;break}return t.abrupt("return",this.GetData(e,++i));case 11:if(this.SnapshotData.unshift({FileName:a,data:r}),n=--e,s=this.params.Reports[n],!s){t.next=16;break}return t.abrupt("return",this.GetData(n));case 16:return this.Render(),this.loadeddata=!0,t.abrupt("return",!0);case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"GetParams",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$AnalysisStore.GetJson("https://fmex-database.oss-cn-qingdao.aliyuncs.com/runner/report/".concat(this.report,"/config"),!0);case 2:if(e=t.sent,e){t.next=5;break}return t.abrupt("return",this.$AppStore.Error("配置文件加载失败，请刷新重试"));case 5:if(Object.assign(this.params,e),this.loaded=!0,this.params.Key=this.$AppStore.localState.UserKey,0!==this.params.Reports.length){t.next=10;break}return t.abrupt("return");case 10:0===this.ShowReports.length&&(this.ShowReports=this.ReportsSelect.slice(this.ReportsSelect.length-Math.min(this.ReportsSelect.length,5))),this.GetData(this.params.Reports.length-1),this.RenderInit();case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"validate",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.RunderSetting(),"success"===e){t.next=3;break}return t.abrupt("return");case 3:return this.params.ReportKey=this.report,this.$AppStore.localState.UserKey=this.params.Key,t.next=7,g["a"].post("/grid/set-params",this.params).then((function(t){return t.data}));case 7:if(i=t.sent,console.log(i),this.settingDailog=!1,!i.Error()){t.next=12;break}return t.abrupt("return",this.$AppStore.Error(i.Msg));case 12:this.$AppStore.Error("保存成功");case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"deleteIt",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=confirm("永久删除后，无法找回数据，是否删除？"),e){t.next=3;break}return t.abrupt("return");case 3:return this.params.ReportKey=this.report,t.next=6,g["a"].post("/grid/del-params",this.params).then((function(t){return t.data}));case 6:if(i=t.sent,console.log(i),this.settingDailog=!1,!i.Error()){t.next=11;break}return t.abrupt("return",this.$AppStore.Error(i.Msg));case 11:this.$AppStore.localState.UserKey="",this.$AppStore.localState.ApiInfo.DataKey="",this.$AppStore.Error("删除成功");case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"BuildTime",get:function(){var t="__Build_Time__"===window.__Build_Time?Date.now():parseInt(window.__Build_Time,10);return Object(d["b"])(t,"yyyy-MM-dd hh:mm")}},{key:"ReportsSelect",get:function(){return this.params.Reports.map((function(t){return t.replace(/(.*?)\/(\d\d\d\d)\/(\d\d)\/(\d\d)\.json/,(function(t,e,i,a,r){return"".concat(i,"-").concat(a,"-").concat(r)}))}))}},{key:"report",get:function(){var t=this.$route.query.DataKey;return t||"e6e53eb75ebbe4eae637898fee27dacc"}}]),i}(h["b"]);Object(p["a"])([Object(h["c"])("ViewMode")],P.prototype,"OnViewModeChange",null),Object(p["a"])([Object(h["c"])("BtcNumEnd"),Object(h["c"])("DataNum"),Object(h["c"])("ShowReports",{deep:!0})],P.prototype,"OnSomeChange",void 0),Object(p["a"])([Object(h["c"])("settingDailog")],P.prototype,"OnSettingDailogChange",null),Object(p["a"])([Object(h["c"])("detailValue")],P.prototype,"detailValueChange",null),P=Object(p["a"])([Object(h["a"])({components:{}})],P);var k=P,R=k,M=(i("88bc"),i("2877")),O=i("6544"),D=i.n(O),C=i("0798"),A=i("8336"),V=i("b0af"),B=i("62ad"),_=i("a523"),j=i("169a"),T=i("4bd4"),E=i("132d"),L=i("604c"),$=i("da13"),N=i("1800"),G=i("5d23"),I=i("34c3"),K=i("0fd9"),F=i("b974"),q=i("ba0d"),U=i("b73d"),z=i("71a3"),H=i("fe57"),J=i("8654"),Z=Object(M["a"])(R,a,r,!1,null,"3983dad3",null);e["default"]=Z.exports;D()(Z,{VAlert:C["a"],VBtn:A["a"],VCard:V["a"],VCol:B["a"],VContainer:_["a"],VDialog:j["a"],VForm:T["a"],VIcon:E["a"],VItemGroup:L["b"],VListItem:$["a"],VListItemAction:N["a"],VListItemContent:G["a"],VListItemIcon:I["a"],VRow:K["a"],VSelect:F["a"],VSlider:q["a"],VSwitch:U["a"],VTab:z["a"],VTabs:H["a"],VTextField:J["a"]})}}]);
//# sourceMappingURL=chunk-4a30992b.4aaae77c.js.map