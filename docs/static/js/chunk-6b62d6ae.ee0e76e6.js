(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b62d6ae"],{"1da0":function(t,e,i){"use strict";var a=i("6a9e"),n=i.n(a);n.a},"6a9e":function(t,e,i){},"7e58":function(t,e,i){},"9d01":function(t,e,i){},b73d:function(t,e,i){"use strict";i("0481"),i("4069");var a=i("5530"),n=(i("ec29"),i("9d01"),i("4de4"),i("45fc"),i("d3b7"),i("25f0"),i("c37a")),r=i("5607"),s=i("2b0e"),o=s["default"].extend({name:"rippleable",directives:{ripple:r["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),t.on=Object.assign({click:this.onChange},this.$listeners),this.$createElement("div",t)):null},onChange:function(){}}}),l=i("8547"),c=i("58df"),u=Object(c["a"])(n["a"],o,l["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data:function(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor:function(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple:function(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive:function(){var t=this,e=this.value,i=this.internalValue;return this.isMultiple?!!Array.isArray(i)&&i.some((function(i){return t.valueComparator(i,e)})):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,i):Boolean(i):this.valueComparator(i,this.trueValue)},isDirty:function(){return this.isActive},rippleState:function(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue:function(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel:function(){var t=this,e=n["a"].options.methods.genLabel.call(this);return e?(e.data.on={click:function(e){e.preventDefault(),t.onChange()}},e):e},genInput:function(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown},ref:"input"})},onBlur:function(){this.isFocused=!1},onChange:function(){var t=this;if(this.isInteractive){var e=this.value,i=this.internalValue;if(this.isMultiple){Array.isArray(i)||(i=[]);var a=i.length;i=i.filter((function(i){return!t.valueComparator(i,e)})),i.length===a&&i.push(e)}else i=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(i,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(i,e)?null:e:!i;this.validate(!0,i),this.internalValue=i,this.hasColor=i}},onFocus:function(){this.isFocused=!0},onKeydown:function(t){}}}),p=i("c3f0"),h=i("0789"),d=i("490a"),m=i("80d2");e["a"]=u.extend({name:"v-switch",directives:{Touch:p["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(a["a"])(Object(a["a"])({},n["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(a["a"])(Object(a["a"])({},this.attrs),this.attrs$)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(a["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(a["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(h["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(d["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===m["s"].left&&this.isActive||t.keyCode===m["s"].right&&!this.isActive)&&this.onChange()}}})},ec29:function(t,e,i){},fc6a8:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.report?i("div",{staticClass:"page-index"},[i("div",{staticClass:"center",staticStyle:{"padding-top":"20px"}},[i("p",[t._v("账号: "+t._s(t.report))]),t.IsAdmin?t._e():i("p",[t._v("无当前账号设置权限")])]),i("v-btn-toggle",{attrs:{color:"primary",tile:"",dense:""},model:{value:t.IsUSD,callback:function(e){t.IsUSD=e},expression:"IsUSD"}},[i("v-btn",[t._v("BTC本位")]),i("v-btn",[t._v("USD本位")])],1),i("v-btn-toggle",{attrs:{color:"primary",mandatory:"",tile:"",dense:""},model:{value:t.ViewMode,callback:function(e){t.ViewMode=e},expression:"ViewMode"}},[i("v-btn",[t._v("最近24小时")]),i("v-btn",[t._v("最近视图")]),i("v-btn",[t._v("总视图")]),i("v-btn",[t._v("自定义视图")])],1),i("v-card-text",[t._v(" "+t._s(t.ViewModeText[t.ViewMode])+" ")]),3===t.ViewMode?[i("v-select",{attrs:{items:t.ReportsSelect,filled:"",chips:"",label:"选择查看数据",multiple:""},model:{value:t.ShowReports,callback:function(e){t.ShowReports=e},expression:"ShowReports"}}),i("v-select",{attrs:{items:t.BtcNumEnds,filled:"",chips:"",label:"资产,小数精确位数"},model:{value:t.BtcNumEnd,callback:function(e){t.BtcNumEnd=e},expression:"BtcNumEnd"}}),i("v-select",{attrs:{items:t.DataNums,filled:"",chips:"",label:"查看每日采样数据：份"},model:{value:t.DataNum,callback:function(e){t.DataNum=e},expression:"DataNum"}})]:t._e(),i("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({staticStyle:{top:"80px"},attrs:{color:"primary",fixed:"",top:"",right:"",small:"",fab:""}},"v-btn",n,!1),a),[i("v-icon",[t._v("mdi-view-dashboard-outline")])],1)]}}]),model:{value:t.settingDailog,callback:function(e){t.settingDailog=e},expression:"settingDailog"}},[i("v-form",{ref:"form",staticStyle:{padding:"20px","background-color":"#ffffff"},attrs:{"lazy-validation":""}},[i("v-btn-toggle",{attrs:{color:"primary",tile:"",mandatory:"",dense:""},model:{value:t.params.Hedging,callback:function(e){t.$set(t.params,"Hedging",e)},expression:"params.Hedging"}},[i("v-btn",[t._v("合约网格")]),i("v-btn",[t._v("USD本位 BTC对冲")])],1),0===t.params.Hedging?[t._l(t.params.OrderRule,(function(e,a){return i("v-list-item",{key:a,attrs:{dense:"","active-class":"text--accent-4"}},[i("v-list-item-icon",[i("v-text-field",{staticStyle:{width:"80px"},attrs:{required:"",label:"价格"+(a+1),type:"number"},model:{value:e.Price,callback:function(i){t.$set(e,"Price",t._n(i))},expression:"item.Price"}})],1),i("v-list-item-content",[i("v-text-field",{staticStyle:{width:"80px"},attrs:{required:"",label:"持仓(负为空)",type:"number"},model:{value:e.Position,callback:function(i){t.$set(e,"Position",t._n(i))},expression:"item.Position"}})],1),i("v-list-item-action",[i("v-icon",{attrs:{color:"error"},on:{click:function(e){return t.params.OrderRule.splice(a,1)}}},[t._v("mdi-close-circle")]),a<t.params.OrderRule.length-1?i("v-icon",{attrs:{color:"primary"},on:{click:function(i){return t.ChooseRule(e)}}},[t._v("mdi-vector-radius")]):t._e()],1)],1)})),i("v-list-item",{attrs:{dense:""}},[i("v-list-item-content",[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){return t.params.OrderRule.push({Price:0,Position:0,Next:{Type:"",Position:0,Price:0}})}}},[t._v("mdi-plus-circle")])],1)],1)]:[i("v-text-field",{staticStyle:{"margin-top":"10px"},attrs:{required:"",outlined:"",label:"持仓偏移量",type:"number"},model:{value:t.params.HedgingDiffVol,callback:function(e){t.$set(t.params,"HedgingDiffVol",t._n(e))},expression:"params.HedgingDiffVol"}})],i("v-dialog",{model:{value:t.settingDailogSub,callback:function(e){t.settingDailogSub=e},expression:"settingDailogSub"}},[i("v-item-group",{staticStyle:{"background-color":"#ffffff"}},[i("v-container",[i("v-row",[i("v-card-text",[t._v("函数模型，不懂的请选择最后一个，切勿乱选，影响收益")]),t._l(t.RuleTypes,(function(e){return i("v-col",{key:e,attrs:{cols:"6",md:"2"}},[i("v-card",{staticClass:"d-flex align-center",attrs:{height:"100"}},[i("div",{class:t.ActiveRule&&t.ActiveRule.Next.Type===e?"div-active":"",style:{"background-image":"url(/t-"+e+".svg)",width:"100%",height:"100%"},attrs:{type:"image/svg+xml"},on:{click:function(i){return t.RuleChoosed(e)}}})])],1)}))],2)],1)],1)],1),i("v-text-field",{staticStyle:{"margin-top":"10px"},attrs:{required:"",label:"单次挂单上限(张)",type:"number",outlined:""},model:{value:t.params.MaxStepVol,callback:function(e){t.$set(t.params,"MaxStepVol",t._n(e))},expression:"params.MaxStepVol"}}),i("v-text-field",{attrs:{required:"",label:"挂单数量（单边，1~25）",type:"number",outlined:""},model:{value:t.params.OpenOrderMaxCount,callback:function(e){t.$set(t.params,"OpenOrderMaxCount",t._n(e))},expression:"params.OpenOrderMaxCount"}}),i("v-text-field",{attrs:{required:"",label:"挂单间隔(USD，0.5的倍数)",type:"number",outlined:""},model:{value:t.params.GridDiff,callback:function(e){t.$set(t.params,"GridDiff",t._n(e))},expression:"params.GridDiff"}}),t.IsAdmin?i("v-text-field",{attrs:{required:"",label:"api key",type:"text",outlined:"",clearable:""},model:{value:t.params.Key,callback:function(e){t.$set(t.params,"Key",e)},expression:"params.Key"}}):t._e(),t.IsAdmin?i("v-text-field",{attrs:{required:"",label:"密码",type:"password",outlined:"",clearable:""},model:{value:t.params.Pwd,callback:function(e){t.$set(t.params,"Pwd",e)},expression:"params.Pwd"}}):t._e(),t.IsAdmin?i("v-switch",{staticClass:"ma-2",attrs:{label:"策略开关（保存后生效）"},model:{value:t.params.Runner,callback:function(e){t.$set(t.params,"Runner",e)},expression:"params.Runner"}}):t._e(),0===t.params.Hedging?i("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:t.RunderSetting}},[i("v-icon",[t._v("mdi-refresh")]),t._v(" 预览策略视图 ")],1):t._e(),0===t.params.Hedging?i("div",{ref:"params",staticStyle:{"padding-bottom":"20px",width:"280px",height:"300px"}}):t._e(),t.IsAdmin?i("v-btn",{staticClass:"mr-4",attrs:{color:"success"},on:{click:t.validate}},[t._v("保存")]):t._e(),t.IsAdmin?i("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:t.deleteIt}},[t._v("永久删除")]):t._e()],2)],1),t.loaded&&t.loadeddata&&0===t.params.Reports.length?i("v-alert",{attrs:{type:"error"}},[t._v(" 该账号，暂无报表数据 ")]):t._e(),i("div",{staticClass:"section"},[i("div",{ref:"MyAccount",staticClass:"echarts",staticStyle:{"padding-top":"10px"}}),i("div",{ref:"MyAccountReport",staticClass:"echarts",staticStyle:{"padding-top":"40px"}}),i("div",{ref:"MyAccountDetail",staticClass:"echarts",staticStyle:{"padding-top":"40px"}}),i("v-slider",{attrs:{"thumb-label":"always","thumb-size":50,min:t.detailMin,max:t.detailMax,step:.5},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.detailValue-=.5}}},[t._v(" mdi-minus ")])]},proxy:!0},{key:"append",fn:function(){return[i("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.detailValue+=.5}}},[t._v(" mdi-plus ")])]},proxy:!0}]),model:{value:t.detailValue,callback:function(e){t.detailValue=e},expression:"detailValue"}})],1)],2):i("div",{staticClass:"center"},[i("h1",{staticClass:"sitename"},[t._v("参数错误")])])},n=[],r=(i("99af"),i("4de4"),i("4160"),i("c975"),i("a15b"),i("d81d"),i("fb6a"),i("a434"),i("b0c0"),i("ac1f"),i("466d"),i("5319"),i("1276"),i("159b"),i("2909")),s=(i("96cf"),i("1da1")),o=i("d4ec"),l=i("bee2"),c=i("262e"),u=i("2caf"),p=i("9ab4"),h=i("60a3"),d=i("36c1"),m=i("313e"),f=i.n(m),g=i("a7a6"),v=i("b8f7"),b=null,y=null,x=null,S=Object(d["b"])(Date.now(),"yyyy-MM-dd"),w={},D=function(t){Object(c["a"])(i,t);var e=Object(u["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.ViewModeText=["最近24小时策略形成的数据","变更参数 10 分钟后至今，策略形成的数据","该账号注册以来所有数据采样得出的视图","自定义数据和采样精度，分析数据"],t.TipDialog=!1,t.loaded=!1,t.loadeddata=!1,t.settingDailog=!1,t.settingDailogSub=!1,t.ViewMode=2,t.modal=!1,t.DateMax=S,t.Times=[S,S],t.Dates=[S,S],t.ShowReports=[],t.BtcNumEnd=6,t.DataNum=3e3,t.BtcNumEnds=[4,5,6,7,8,9,10,11,12,13,14],t.DataNums=[500,1e3,3e3,6e3,12e3,24e3],t.TipDialogData={Prices:[]},t.OnSomeChange=Object(g["debounce"])((function(){console.log("OnSomeChange"),this.loaded&&this.loadeddata&&this.Render()}),1500),t.RuleTypes=["L7","7L","L","7","LL","77",""],t.ActiveRule=null,t.params={Hedging:1,OrderRule:[{Price:4e3,Position:-400,Next:{Type:"L7",Position:0,Price:0}},{Price:2e4,Position:-2e3,Next:{Type:"L7",Position:0,Price:0}}],OpenOrderMaxCount:15,Runner:!1,Key:h["b"].AppStore.localState.UserKey,BasePrice:11700,BasePriceWeight:1,GridDiff:1,MaxStepVol:1e3,Reports:[],Time:0,Pwd:"",ReportKey:"",BakSetting:[],PricePosition:[],HedgingDiffVol:0},t.serverparams=null,t.OrderRuleModel=[],t.detailValue=0,t.detailMin=1/0,t.detailMax=0,t.SnapshotData=[],t.Runder3=Object(g["throttle"])((function(){if(x){var t=w[this.detailValue],e=function(){};if(!t)return e();var i=this.IsUSD?"UsdSum":"BtcSum",a=-1,n=t.details.filter((function(t){return t[i]!==a&&(a=t[i],!0)}));if(n.length<2)return e();var r=n[0][i],s=n[n.length-1][i],o=Math.pow(10,this.BtcNumEnd),l=Math.floor((s-r)*o)/o,c=("".concat(t.price," USD 资产变更"),l/r),u="".concat(t.price," USD 用户资产变更 ").concat(l>0?"+ "+l:l," (").concat(Math.floor(1e4*c)/100,"%)");if(l>0){var p=n[n.length-1].Ts-n[0].Ts,h=Math.ceil(c),m=h/c*p,f=Object(d["b"])(n[0].Ts+m,"yyyy年MM月dd日hh点"),g=Math.floor((1+h)*r*1e4)/1e4;u+="\r\n以此预计在 ".concat(f," 资产为 ").concat(g,"（").concat(Math.floor(1e4*r)/1e4,"的").concat(h+1,"倍）")}console.log(t),x.setOption({legend:{data:["资产"]},title:{subtext:u},xAxis:{data:n.map((function(t){return Object(d["b"])(t.Ts,"hh:mm:ss\r\nMM-dd")}))},series:[{name:"资产",yAxisIndex:1,type:"line",data:n.map((function(t){return t[i]})),color:"rgba(4, 164, 204, 1)",areaStyle:{color:"rgba(4, 164, 204, 0.2)"}}]})}}),1e3),t}return Object(l["a"])(i,[{key:"OnTipDialogChange",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.TipDialog){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.$nextTick();case 4:if(this.serverparams){t.next=8;break}return this.TipDialog=!1,this.$AppStore.Error("资源未加载完成"),t.abrupt("return");case 8:i=[{Title:"做多区间（持【多单】）",Content:""},{Title:"部分套保（持一倍以下【空单】）",Content:""},{Title:"对冲区间（持一倍【空单】）",Content:""},{Title:"做空区间（持一倍以上【空单】）",Content:""}],this.serverparams.PricePosition.forEach((function(t){})),(e=this.TipDialogData.Prices).splice.apply(e,[0,this.TipDialogData.Prices.length].concat(i));case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"OnViewModeChange",value:function(){0===this.ViewMode?(this.ShowReports=this.ReportsSelect.slice(this.ReportsSelect.length-Math.min(this.ReportsSelect.length,2)),this.BtcNumEnd=this.BtcNumEnds[this.BtcNumEnds.length-1],this.DataNum=this.DataNums[this.DataNums.length-1]):1===this.ViewMode||2===this.ViewMode?(this.ShowReports=this.ReportsSelect.slice(0),this.BtcNumEnd=6,this.DataNum=this.DataNums[0]):(this.ShowReports=this.ReportsSelect.slice(this.ReportsSelect.length-Math.min(this.ReportsSelect.length,5)),this.BtcNumEnd=6,this.DataNum=3e3)}},{key:"DataFilter",value:function(t){var e=this,i=this.ShowReports.map((function(t){return t.replace(/-/g,"/")})),a=Date.now()-864e5,n=this.params.Time+6e5;return n>=this.params.Time+66e4&&(n=0),t.map((function(t){var r=i.filter((function(e){return t.FileName.match(e)}))[0];if(!r)return{data:[],FileName:""};var s=Math.pow(10,e.BtcNumEnd),o=[],l=0,c=e.IsUSD?"UsdSum":"BtcSum";t.data.forEach((function(t){var i=Math.floor(t[c]*s)/s;if(i!==l&&!(0===e.ViewMode&&t.Ts<a)&&!(1===e.ViewMode&&t.Ts<n)){l=i;var r={Ts:t.Ts,p24h:t.p24h,Price:t.Price,BtcSum:i,UsdSum:i,quantity:t.quantity};o.push(r)}}));return e.ArrayFilter(o,e.DataNum),{data:o,FileName:t.FileName}})).filter((function(t){return t.data.length}))}},{key:"ArrayFilter",value:function(t,e){if(t.length){var i=t.length/e;if(!(i<=1)){var a=0,n={};t.forEach((function(e,r){n[Math.floor(r*i)]=!0,n[r]&&(t[a++]=e)}));var r=t[t.length-1];t.splice(a,t.length-a),t[t.length-1]=r}}}},{key:"OnSettingDailogChange",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.settingDailog){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.$nextTick();case 4:return t.next=6,Object(d["f"])(1e3);case 6:this.RunderSetting();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"RunderSetting",value:function(){var t=this,e=[];this.params.OrderRule.sort((function(t,e){return t.Price-e.Price}));var i="",a=1/0,n=0;if(0===this.params.Hedging&&this.params.OrderRule.forEach((function(t,r){var s="【价格".concat(r+1,"】");if(!i){if(t.Price<=0)return i="价格不能为 0 ".concat(s);if(t.Position>a)return i="价格越大，持仓必须越小 ".concat(s);if(t.Price===n)return i="价格不能重复 ".concat(s);a=t.Position,n=t.Price,e.push(t)}})),i||(this.params.MaxStepVol<=0&&(i="下单上限错误"),this.params.OpenOrderMaxCount<=0&&(i="单边挂单数量错误"),this.params.GridDiff<.5&&(i="挂单间隔不能小于0.5"),0===this.params.Hedging&&e.length<2&&(i="价格至少设置两个")),i)return this.$AppStore.Error(i);if(this.params.HedgingDiffVol||(this.params.HedgingDiffVol=0),0===this.params.Hedging){var r=f.a.init(this.$refs.params),s=e[0].Price,o=e[e.length-1].Price-s,l=Math.ceil(o/this.params.GridDiff),c=Array(l+1).join(",").split(",").map((function(e,i){return i*t.params.GridDiff+s})),u=[],p=null;e.forEach((function(t){if(p){var e=p;p=t;var i=e.Next;switch(i.Position=(e.Position+t.Position)/2,i.Price=(t.Price+e.Price)/2,i.Type){case"L":i.Position=i.Position- -.5*(i.Position-e.Position),i.Price=i.Price- -.5*(i.Price-t.Price);break;case"7":i.Position=i.Position- -.5*(i.Position-t.Position),i.Price=i.Price- -.5*(i.Price-e.Price);break}i.Price,i.Position,e.Price,e.Position,t.Price,t.Position;c.forEach((function(a){if(!(a<e.Price||a>t.Price)){if(a===t.Price)return u.push(t.Position);if(a===i.Price)return u.push(i.Position);if(a===e.Price)return u.push(e.Position);var n=e,r=i;a>i.Price&&(n=i,r=t);var s=(a-n.Price)/(r.Price-n.Price),o=.5+1.5*s,l=0,c=function(){return s*(n.Position-r.Position)},p=function(){return(2-1/o)/1.5*(n.Position-r.Position)},h=function(){return(1/(2.5-o)-.5)/1.5*(n.Position-r.Position)},d=i.Type.split(""),m=d[0],f=d[d.length-1];l=""===i.Type?c():a<i.Price&&"7"===m||a>i.Price&&"7"===f?h():p();var g=n.Position-l;u.push(g>0?Math.floor(g):Math.ceil(g))}}))}else p=t})),this.params.PricePosition=c.map((function(t,e){return[t,u[e]]})),r.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["仓位"]},grid:{left:"20px",right:"14px",bottom:"40px",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1}],yAxis:[{type:"value",min:"dataMin",max:"dataMax"}]}),r.setOption({xAxis:{data:c},series:[{name:"仓位",type:"bar",data:u}]})}return"success"}},{key:"ChooseRule",value:function(t){this.settingDailogSub=!0,this.ActiveRule=t}},{key:"RuleChoosed",value:function(t){this.ActiveRule&&(this.ActiveRule.Next.Type=t,this.settingDailogSub=!1)}},{key:"detailValueChange",value:function(){this.Runder3()}},{key:"mounted",value:function(){this.mountedd()}},{key:"allowedDates",value:function(t){return this.params.Reports.indexOf(t)>-1}},{key:"mountedd",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.GetParams();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"Submit",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$refs.dialog.save(this.Dates),e=new Date(this.Dates[0]),i=new Date(this.Dates[1]),e.getTime()>i.getTime()&&(a=e.getTime(),e.setTime(i.getTime()),i.setTime(a)),this.Times=[Object(d["b"])(e,"yyyy-MM-dd"),Object(d["b"])(i,"yyyy-MM-dd")],h["b"].AppStore.localState.TimesCache=this.Times,this.SnapshotData=[],t.next=9,this.GetData(this.params.Reports.length-1);case 9:this.Render();case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"RenderInit",value:function(){this.SnapshotData=[],b=f.a.init(this.$refs.MyAccount),b.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["24H均价","BTC价格","账户资产","持仓"],selected:{"24H均价":!1,"BTC价格":!1,"账户资产":!0,"持仓":!1}},dataZoom:[{show:!0,start:0,end:100}],grid:{left:"20px",right:"14px",bottom:"40px",containLabel:!0},title:{text:"",subtext:"BTC价格走势 与 账户资产、持仓 走势分析",top:4},xAxis:[{type:"category",boundaryGap:!1}],yAxis:[{type:"value",position:"left",name:"BTC价格(USD)",axisLabel:{formatter:"{value}"},min:"dataMin",max:"dataMax",splitLine:{show:!1}},{type:"value",position:"right",name:"账户资产",axisLabel:{formatter:"{value}"},min:function(t){return Math.floor(1e4*t.min)/1e4},splitLine:{show:!1}},{type:"value",offset:50,position:"right",name:"持仓(张)",axisLabel:{formatter:"{value}"},splitLine:{show:!1}}]}),y=f.a.init(this.$refs.MyAccountReport),y.setOption({backgroundColor:"#404a59",tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["资产"]},grid:{left:"20px",right:"14px",bottom:"40px",containLabel:!0},title:{text:"",subtext:"资产-变更趋势",top:4},xAxis:{type:"value",name:"BTC 价格",nameGap:4,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},yAxis:{type:"value",name:"账户权益",nameLocation:"end",nameGap:4,nameTextStyle:{color:"#fff",fontSize:16},axisLine:{lineStyle:{color:"#eee"}},splitLine:{show:!1}},visualMap:[{left:"right",bottom:"5%",dimension:2,min:0,max:50,itemHeight:0,precision:.1,text:["白色表示旧数据"],textGap:30,textStyle:{color:"#fff"},inRange:{colorLightness:[1,.5],symbolSize:[2,2],colorAlpha:[.1,1],color:"#04a4cc"},outOfRange:{color:["rgba(255,255,255,.2)"]},controller:{inRange:{color:["#04a4cc"]},outOfRange:{color:["#04a4cc"]}}}]}),x=f.a.init(this.$refs.MyAccountDetail),x.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["资产变更-详情"]},grid:{left:"20px",right:"14px",bottom:"40px",top:"80px",containLabel:!0},title:{text:"",subtext:"",top:4},xAxis:[{type:"category",boundaryGap:!1,scale:!0,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{type:"value",position:"left",name:"价格: USD",axisLabel:{formatter:"{value}"},min:"dataMin",splitLine:{show:!1}},{type:"value",position:"right",name:"账户权益",axisLabel:{formatter:"{value}"},min:function(t){return Math.floor(1e4*t.min)/1e4},splitLine:{show:!1}}]})}},{key:"Render",value:function(){var t=this;if(b&&y&&x){var e={name:"资产(BTC)",type:"line",color:"rgba(4, 164, 204, 1)",areaStyle:{color:"rgba(4, 164, 204, 0.2)"},key:"BtcSum",y:1},i={name:"资产(USD)",type:"line",color:"rgba(4, 164, 204, 1)",areaStyle:{color:"rgba(4, 164, 204, 0.2)"},key:"UsdSum",y:1};console.log("IsUSD",this.IsUSD);var a=[this.IsUSD?i:e,{name:"24H均价",type:"line",color:"#666666",key:"p24h",y:0},{name:"BTC价格",type:"line",color:"rgba(4, 100, 100, 0.5)",key:"Price",y:0},{name:"持仓",type:"line",color:"rgba(255, 0, 150, 0.5)",areaStyle:{color:"rgba(255, 0, 150, 0.2)"},key:"quantity",y:2}],n={};a.forEach((function(t){n[t.name]={yAxisIndex:t.y,name:t.name,type:t.type,data:[],color:t.color,areaStyle:t.areaStyle}}));var s=[];w={};var o=[],l=[],c=this.DataFilter(this.SnapshotData);c.forEach((function(t){t.data.forEach((function(t){l.push(t),a.forEach((function(e){var i=t[e.key];n[e.name].data.push(i)})),s.push(Object(d["b"])(t.Ts,"hh:mm:ss\r\nMM-dd"))}))}));var u=this.IsUSD?"UsdSum":"BtcSum";this.SnapshotData.forEach((function(e){e.data.forEach((function(e){var i=e[u],a=w[e.Price];if(!a)return w[e.Price]={low:i,high:i,open:i,close:i,price:e.Price,details:[e]},void o.push(w[e.Price]);a.low=Math.min(a.low,i),a.high=Math.max(a.high,i),a.close=i,a.details.push(e),t.detailMax=Math.max(t.detailMax,e.Price),t.detailMin=Math.min(t.detailMin,e.Price)}))}));var p=0;o.forEach((function(t){var e=t.close,i=t.low,a=t.high,n=o[p++];n.low=i,n.high=a,n.close=e})),o.splice(p,o.length-p),o.sort((function(t,e){return t.price-e.price})),b.setOption({xAxis:{data:s},series:Object(r["a"])(a.map((function(t){return n[t.name]})))});l.sort((function(t,e){return t.Price-e.Price}));var h={opacity:.8,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0, 0, 0, 0.5)"},m=l.map((function(t){return t.Price})),f=l.map((function(t){return t[u]})),g=l.map((function(t){return t.Ts}));y.setOption({xAxis:{min:Math.min.apply(Math,Object(r["a"])(m)),max:Math.max.apply(Math,Object(r["a"])(m))},yAxis:{min:Math.floor(1e4*Math.min.apply(Math,Object(r["a"])(f)))/1e4,max:Math.ceil(1e4*Math.max.apply(Math,Object(r["a"])(f)))/1e4},visualMap:[{dimension:2,min:Math.min.apply(Math,Object(r["a"])(g)),max:Math.max.apply(Math,Object(r["a"])(g))}],series:[{name:"",type:"scatter",itemStyle:h,data:l.map((function(t){return[t.Price,t[u],t.Ts]}))}]});var v=c[c.length-1];if(v&&v.data.length){var S=v.data[v.data.length-1].Price;console.log(S),this.detailValue=S}}}},{key:"GetData",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var i,a,n,r,s,o,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=l.length>1&&void 0!==l[1]?l[1]:1,!(i>5)){t.next=3;break}return t.abrupt("return");case 3:if(a=this.params.Reports[e],a){t.next=6;break}return t.abrupt("return");case 6:return n=Object(d["b"])(new Date,"yyyy/MM/dd"),a.match(n)&&(a="".concat(a,"?t=").concat(Date.now())),t.next=10,this.$AnalysisStore.GetData("https://fmex-database.oss-cn-qingdao.aliyuncs.com"+a);case 10:if(r=t.sent,r){t.next=13;break}return t.abrupt("return",this.GetData(e,++i));case 13:if(this.SnapshotData.unshift({FileName:a,data:r}),s=--e,o=this.params.Reports[s],!o){t.next=18;break}return t.abrupt("return",this.GetData(s));case 18:return this.Render(),this.loadeddata=!0,t.abrupt("return",!0);case 21:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"GetParams",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$AnalysisStore.GetJson("https://fmex-database.oss-cn-qingdao.aliyuncs.com/runner/report/".concat(this.report,"/config"),!0);case 2:if(e=t.sent,e){t.next=5;break}return t.abrupt("return",this.$AppStore.Error("配置文件加载失败，请刷新重试"));case 5:if("Hedging"in e||(e.Hedging=0),"HedgingDiffVol"in e||(e.HedgingDiffVol=0),this.params=Object(d["e"])(e),this.serverparams=e,this.params.Hedging&&this.$set(this.$AppStore.localState.IsUsdBenWei,this.params.ReportKey,1),this.OnViewModeChange(),this.loaded=!0,this.params.Key=this.$AppStore.localState.UserKey,this.IsAdmin&&(i=h["b"].AppStore.localState.AdminUsers.filter((function(t){return t.ReportKey===a.report}))[0],i&&(this.params.Key=i.Key)),0!==this.params.Reports.length){t.next=16;break}return t.abrupt("return");case 16:0===this.ShowReports.length&&(this.ShowReports=this.ReportsSelect.slice(this.ReportsSelect.length-Math.min(this.ReportsSelect.length,5))),this.GetData(this.params.Reports.length-1),this.RenderInit();case 19:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"validate",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.RunderSetting(),"success"===e){t.next=3;break}return t.abrupt("return");case 3:return this.params.ReportKey=this.report,t.next=6,v["a"].post("/grid/set-params",this.params).then((function(t){return t.data}));case 6:if(i=t.sent,console.log(i),this.settingDailog=!1,!i.Error()){t.next=11;break}return t.abrupt("return",this.$AppStore.Error(i.Msg));case 11:this.$AppStore.Error("保存成功");case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"deleteIt",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=confirm("永久删除后，无法找回数据，是否删除？"),e){t.next=3;break}return t.abrupt("return");case 3:return this.params.ReportKey=this.report,t.next=6,v["a"].post("/grid/del-params",this.params).then((function(t){return t.data}));case 6:if(i=t.sent,console.log(i),this.settingDailog=!1,!i.Error()){t.next=11;break}return t.abrupt("return",this.$AppStore.Error(i.Msg));case 11:this.$AppStore.localState.UserKey="",this.$AppStore.localState.ApiInfo.DataKey="",this.$AppStore.Error("删除成功");case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"IsUSD",get:function(){return 0===this.$AppStore.localState.IsUsdBenWei[this.report]?0:1},set:function(t){this.$set(this.$AppStore.localState.IsUsdBenWei,this.report,t)}},{key:"BuildTime",get:function(){var t="__Build_Time__"===window.__Build_Time?Date.now():parseInt(window.__Build_Time,10);return Object(d["b"])(t,"yyyy-MM-dd hh:mm")}},{key:"ReportsSelect",get:function(){return this.params.Reports.map((function(t){return t.replace(/(.*?)\/(\d\d\d\d)\/(\d\d)\/(\d\d)\.json/,(function(t,e,i,a,n){return"".concat(i,"-").concat(a,"-").concat(n)}))}))}},{key:"report",get:function(){var t=this.$route.query.DataKey;return t||"e6e53eb75ebbe4eae637898fee27dacc"}},{key:"IsAdmin",get:function(){var t=this;return this.$AppStore.localState.ApiInfo.DataKey===this.report||!!this.$AppStore.localState.AdminUsers.filter((function(e){return e.ReportKey===t.report})).length}}]),i}(h["b"]);Object(p["a"])([Object(h["c"])("TipDialog")],D.prototype,"OnTipDialogChange",null),Object(p["a"])([Object(h["c"])("ViewMode",{immediate:!0})],D.prototype,"OnViewModeChange",null),Object(p["a"])([Object(h["c"])("BtcNumEnd"),Object(h["c"])("IsUSD"),Object(h["c"])("DataNum"),Object(h["c"])("ShowReports",{deep:!0})],D.prototype,"OnSomeChange",void 0),Object(p["a"])([Object(h["c"])("settingDailog")],D.prototype,"OnSettingDailogChange",null),Object(p["a"])([Object(h["c"])("detailValue")],D.prototype,"detailValueChange",null),D=Object(p["a"])([Object(h["a"])({components:{}})],D);var k=D,P=k,M=(i("1da0"),i("2877")),O=i("6544"),R=i.n(O),C=i("0798"),V=i("8336"),A=i("5530"),T=(i("7e58"),i("3860")),_=i("a9ad"),j=i("58df"),B=Object(j["a"])(T["a"],_["a"]).extend({name:"v-btn-toggle",props:{backgroundColor:String,borderless:Boolean,dense:Boolean,group:Boolean,rounded:Boolean,shaped:Boolean,tile:Boolean},computed:{classes:function(){return Object(A["a"])(Object(A["a"])({},T["a"].options.computed.classes.call(this)),{},{"v-btn-toggle":!0,"v-btn-toggle--borderless":this.borderless,"v-btn-toggle--dense":this.dense,"v-btn-toggle--group":this.group,"v-btn-toggle--rounded":this.rounded,"v-btn-toggle--shaped":this.shaped,"v-btn-toggle--tile":this.tile},this.themeClasses)}},methods:{genData:function(){var t=this.setTextColor(this.color,Object(A["a"])({},T["a"].options.methods.genData.call(this)));return this.group?t:this.setBackgroundColor(this.backgroundColor,t)}}}),$=i("b0af"),E=i("99d9"),I=i("62ad"),L=i("a523"),N=i("169a"),U=i("4bd4"),H=i("132d"),G=i("604c"),K=i("da13"),F=i("1800"),q=i("5d23"),z=i("34c3"),W=i("0fd9"),J=i("b974"),Z=i("ba0d"),X=i("b73d"),Y=i("8654"),Q=Object(M["a"])(P,a,n,!1,null,"5489e40d",null);e["default"]=Q.exports;R()(Q,{VAlert:C["a"],VBtn:V["a"],VBtnToggle:B,VCard:$["a"],VCardText:E["c"],VCol:I["a"],VContainer:L["a"],VDialog:N["a"],VForm:U["a"],VIcon:H["a"],VItemGroup:G["b"],VListItem:K["a"],VListItemAction:F["a"],VListItemContent:q["a"],VListItemIcon:z["a"],VRow:W["a"],VSelect:J["a"],VSlider:Z["a"],VSwitch:X["a"],VTextField:Y["a"]})}}]);
//# sourceMappingURL=chunk-6b62d6ae.ee0e76e6.js.map