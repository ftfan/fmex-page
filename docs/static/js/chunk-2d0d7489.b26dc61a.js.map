{"version":3,"sources":["webpack:///./src/views/WechatTest.vue?6c8d","webpack:///./src/views/WechatTest.vue","webpack:///./src/views/WechatTest.vue?e430","webpack:///./src/views/WechatTest.vue?79e4"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticRenderFns","Promise","all","c","window","cloud","Cloud","appid","resourceAppid","resourceEnv","console","log","init","getJSSDKSignature","url","location","href","res","wx","config","appId","timestamp","nonceStr","signature","jsApiList","share","Title","Desc","Url","Img","ready","hideAllNonBaseMenuItem","showMenuItems","menuList","onMenuShareTimeline","title","desc","link","imgUrl","success","errMsg","alert","onMenuShareAppMessage","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAC/FE,EAAkB,G,0ICQD,EAArB,0VAEUC,QAAQC,IAAI,CAAC,iBAAgB,mBAFvC,cAIUC,EAAI,IAAIC,OAAOC,MAAMC,MAAM,CAC/BC,MAAO,qBACPC,cAAe,qBACfC,YAAa,eAEfC,QAAQC,IAAIR,GAThB,SAYUA,EAAES,OAZZ,uBAcsBR,OAAOC,MAAMQ,kBAAkB,CAC/CC,IAAKC,SAASC,OAfpB,OAcUC,EAdV,OAiBIP,QAAQC,IAAIM,GACZb,OAAOc,GAAGC,OAAO,CACfC,MAAO,qBACPC,UAAWJ,EAAII,UAAY,GAC3BC,SAAUL,EAAIK,SACdC,UAAWN,EAAIM,UACfC,UAAW,CACT,sBACA,wBACA,yBACA,mBAGEC,EAAQ,CACZC,MAAO,QACPC,KAAM,OACNC,IAAK,MACLC,IAAK,OAEPzB,OAAOc,GAAGY,OAAM,WACd1B,OAAOc,GAAGa,yBACV3B,OAAOc,GAAGc,cAAc,CACtBC,SAAU,CACR,4BACA,6BAGJ7B,OAAOc,GAAGgB,oBAAoB,CAC5BC,MAAOV,EAAMC,MACbU,KAAMX,EAAME,KACZU,KAAMZ,EAAMG,IACZU,OAAQb,EAAMI,IACdU,QAAS,WAAF,8CAAE,WAAOtB,GAAP,iFACY,qBAAfA,EAAIuB,QAA+BC,MAAM,QADtC,2CAAF,sDAAE,KAIXrC,OAAOc,GAAGwB,sBAAsB,CAC9BP,MAAOV,EAAMC,MACbU,KAAMX,EAAME,KACZU,KAAMZ,EAAMG,IACZU,OAAQb,EAAMI,IACdU,QAAS,WAAF,8CAAE,WAAOtB,GAAP,iFACY,sBAAfA,EAAIuB,QAAgCC,MAAM,QADvC,2CAAF,sDAAE,QA1DjB,0GAAwC,QAAnB,EAAU,gBAD9B,eAAsB,KACF,WCTgX,I,YCOjYE,EAAY,eACd,EACAlD,EACAO,GACA,EACA,KACA,KACA,MAIa,aAAA2C,E","file":"static/js/chunk-2d0d7489.b26dc61a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\r\nimport { LoadCloudApi, LoadWxApi } from '@/lib/bridge';\r\nimport { Component, Vue, Watch } from 'vue-property-decorator';\r\n\r\n@Component<WechatTest>({})\r\nexport default class WechatTest extends Vue {\r\n  async created() {\r\n    await Promise.all([LoadCloudApi(), LoadWxApi()]);\r\n    // 初始化一个实例，声明要使用哪个小程序哪个云环境的资源\r\n    const c = new window.cloud.Cloud({\r\n      appid: 'wxc5709bd44205e738',\r\n      resourceAppid: 'wx647b8a5ba3cae7fa',\r\n      resourceEnv: 'fmex-i1c20',\r\n    });\r\n    console.log(c);\r\n\r\n    // 初始化，等待授权关系校验通过以及目标云环境的 cloudbase_auth 函数返回授权\r\n    await c.init();\r\n    // alert(JSON.stringify(aaa));\r\n    const res = await window.cloud.getJSSDKSignature({\r\n      url: location.href,\r\n    });\r\n    console.log(res);\r\n    window.wx.config({\r\n      appId: 'wxc5709bd44205e738', // 必填，公众号的唯一标识\r\n      timestamp: res.timestamp + '', // 必填，生成签名的时间戳\r\n      nonceStr: res.nonceStr, // 必填，生成签名的随机串\r\n      signature: res.signature, // 必填，签名\r\n      jsApiList: [\r\n        'onMenuShareTimeline', // 发送朋友圈权限\r\n        'onMenuShareAppMessage', // 分享好友权限\r\n        'hideAllNonBaseMenuItem', // 隐藏所有非基础菜单\r\n        'showMenuItems', // 显示菜单项\r\n      ],\r\n    });\r\n    const share = {\r\n      Title: 'Title',\r\n      Desc: 'Desc',\r\n      Url: 'Url',\r\n      Img: 'Img',\r\n    };\r\n    window.wx.ready(() => {\r\n      window.wx.hideAllNonBaseMenuItem();\r\n      window.wx.showMenuItems({\r\n        menuList: [\r\n          'menuItem:share:appMessage', // 发送给朋友\r\n          'menuItem:share:timeline', // 分享到朋友圈\r\n        ],\r\n      });\r\n      window.wx.onMenuShareTimeline({\r\n        title: share.Title, // 分享标题\r\n        desc: share.Desc,\r\n        link: share.Url, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致\r\n        imgUrl: share.Img, // 分享图标\r\n        success: async (res: any) => {\r\n          if (res.errMsg === 'shareTimeline:ok') alert('分享成功');\r\n        },\r\n      });\r\n      window.wx.onMenuShareAppMessage({\r\n        title: share.Title, // 分享标题\r\n        desc: share.Desc, // 分享描述\r\n        link: share.Url, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致\r\n        imgUrl: share.Img, // 分享图标\r\n        success: async (res: any) => {\r\n          if (res.errMsg === 'sendAppMessage:ok') alert('分享成功');\r\n        },\r\n      });\r\n    });\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WechatTest.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WechatTest.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./WechatTest.vue?vue&type=template&id=43b6ced4&\"\nimport script from \"./WechatTest.vue?vue&type=script&lang=ts&\"\nexport * from \"./WechatTest.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}