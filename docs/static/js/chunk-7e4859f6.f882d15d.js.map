{"version":3,"sources":["webpack:///./src/views/Comment.vue?158f","webpack:///./src/views/Comment.vue","webpack:///./src/views/Comment.vue?87f8","webpack:///./src/views/Comment.vue?df84","webpack:///./src/lib/bridge.ts","webpack:///./src/lib/LoadScript.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","callback","$$v","tab","expression","_l","item","key","Name","_v","_s","Component","staticRenderFns","Taps","els","$refs","el","mountedd","query","Object","assign","$route","String","$router","replace","components","SnapshotToday","SnapshotHistory","BtcVolPrice","HoldAmount","Platform","beforeRouteEnter","to","from","next","vm","parseInt","component","VAppBar","VCard","VTab","VTabItem","VTabs","VTabsItems","cloudapi","wxapi","LoadScript","url","attr","type","Promise","resolve","reject","scriptElement","document","createElement","addEventListener","e","body","removeChild","keys","val","setAttribute","src","appendChild","window","WeixinJSBridge","JsBridgeCloseMenu","call","LoadCloudApi","LoadWxApi"],"mappings":"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","file":"static/js/chunk-7e4859f6.f882d15d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-app-bar',{attrs:{\"app\":\"\"}},[_c('v-tabs',{attrs:{\"grow\":\"\",\"contered\":\"\",\"background-color\":\"primary\",\"show-arrows\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},_vm._l((_vm.Taps),function(item){return _c('v-tab',{key:item.Name},[_vm._v(_vm._s(item.Name))])}),1)],1),_c('v-tabs-items',{attrs:{\"touchless\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},_vm._l((_vm.Taps),function(item){return _c('v-tab-item',{key:item.Name},[_c('v-card',[_c('Vssue',{attrs:{\"title\":item.Component}})],1)],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Watch } from 'vue-property-decorator';\r\nimport SnapshotToday from './Analysis/SnapshotToday.vue';\r\nimport SnapshotHistory from './Analysis/SnapshotHistory.vue';\r\nimport BtcVolPrice from './Analysis/BtcVolPrice.vue';\r\nimport HoldAmount from './Analysis/HoldAmount.vue';\r\nimport Platform from './Analysis/Platform.vue';\r\nimport { LogEvent } from '../router';\r\nimport { JsBridgeCloseMenu } from '@/lib/bridge';\r\n// import { IsWechat } from '@/lib/utils';\r\n\r\n@Component<AnalysisPage>({\r\n  components: { SnapshotToday, SnapshotHistory, BtcVolPrice, HoldAmount, Platform },\r\n  beforeRouteEnter: (to, from, next) => {\r\n    JsBridgeCloseMenu();\r\n    next((vm) => {\r\n      vm.tab = parseInt(to.query.tab as string, 10) || 0;\r\n    });\r\n  },\r\n})\r\nexport default class AnalysisPage extends Vue {\r\n  tab = 0;\r\n\r\n  Taps = [\r\n    { Name: '留言板', Component: '留言板' },\r\n    { Name: '建议', Component: '建议' },\r\n  ];\r\n\r\n  @Watch('tab')\r\n  TabClick(tab: any) {\r\n    const item = this.Taps[tab];\r\n    if (!item) return;\r\n    const els = this.$refs[item.Name] as any;\r\n    if (els) {\r\n      const el = els[0];\r\n      if (el && el.mountedd) el.mountedd(); // 初始化组件\r\n    }\r\n    const query = Object.assign({}, this.$route.query, {\r\n      tab: String(tab),\r\n    });\r\n\r\n    // 当前路由与tab不一致时才更新\r\n    if (String(tab) !== String(this.$route.query.tab)) {\r\n      // if (IsWechat) {\r\n      //   location.replace(`/?Analysis=${tab}/#/Analysis?tab=${tab}`);\r\n      // } else {\r\n      this.$router.replace({ query });\r\n      // }\r\n    }\r\n    LogEvent(item.Name, 'click', 'tab', 1);\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Comment.vue?vue&type=template&id=2b20ac53&\"\nimport script from \"./Comment.vue?vue&type=script&lang=ts&\"\nexport * from \"./Comment.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsItems } from 'vuetify/lib/components/VTabs';\ninstallComponents(component, {VAppBar,VCard,VTab,VTabItem,VTabs,VTabsItems})\n","import { IsWechat } from './utils';\r\nimport { LoadScript } from '@/lib/LoadScript';\r\n\r\n// 声明window变量\r\ndeclare global {\r\n  interface Window {\r\n    AlipayJSBridge: any;\r\n    WeixinJSBridge: any;\r\n  }\r\n}\r\n\r\n/**\r\n * 等待微信支付宝SDK加载完毕\r\n */\r\nexport const JsBridgeReady = () => {\r\n  return new Promise((resolve) => {\r\n    if (IsWechat) {\r\n      if (typeof window.WeixinJSBridge !== 'undefined') return resolve();\r\n      return document.addEventListener('WeixinJSBridgeReady', resolve, false);\r\n    }\r\n    resolve();\r\n  });\r\n};\r\n\r\nexport const JsBridgeCloseMenu = async () => {\r\n  await JsBridgeReady();\r\n  if (IsWechat) {\r\n    window.WeixinJSBridge.call('hideOptionMenu');\r\n  }\r\n};\r\n\r\nlet cloudapi: any;\r\nexport const LoadCloudApi = async () => {\r\n  if (cloudapi) return cloudapi;\r\n  cloudapi = LoadScript('https://res.wx.qq.com/open/js/cloudbase/1.1.0/cloud.js');\r\n  return cloudapi;\r\n};\r\n\r\nlet wxapi: any;\r\nexport const LoadWxApi = async () => {\r\n  if (wxapi) return wxapi;\r\n  wxapi = LoadScript('https://res.wx.qq.com/open/js/jweixin-1.6.0.js');\r\n  return wxapi;\r\n};\r\n","export const LoadScript = (\r\n  url: string,\r\n  attr: {\r\n    [index: string]: string;\r\n  } = {\r\n    type: 'text/javascript',\r\n  }\r\n) => {\r\n  return new Promise((resolve, reject) => {\r\n    const scriptElement = document.createElement('script');\r\n\r\n    scriptElement.addEventListener(\r\n      'load',\r\n      (e) => {\r\n        document.body.removeChild(scriptElement);\r\n        resolve(e);\r\n      },\r\n      false\r\n    );\r\n\r\n    scriptElement.addEventListener(\r\n      'error',\r\n      (e) => {\r\n        document.body.removeChild(scriptElement);\r\n        reject(e);\r\n      },\r\n      false\r\n    );\r\n\r\n    if (attr) {\r\n      for (const val of Object.keys(attr)) {\r\n        scriptElement.setAttribute(val, attr[val]);\r\n      }\r\n    }\r\n\r\n    scriptElement.src = url;\r\n    document.body.appendChild(scriptElement);\r\n  });\r\n};\r\n"],"sourceRoot":""}